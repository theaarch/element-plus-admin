import{cw as e,cs as a,ct as t,dk as l,ce as s,t as n,ai as o,z as r,_ as i,d as u,A as d,b as v,r as c,I as b,af as p,aa as f,g as m,f as h,k as g,n as y,i as w,a9 as x,U as C,dE as $,dF as E,s as P,c as R,dG as N,o as k,bZ as T,dt as B,m as S,E as j,cH as A,a8 as F,K as _,L,a2 as V,M as z,b2 as K,l as O,dw as M,B as W,y as I,bC as U,c5 as q,S as D,bD as G,$ as H,h as X,a1 as Y,q as Z,G as J}from"./index.DxBlw8vg.js";import{i as Q,c as ee,r as ae}from"./raf.1exHiZ7S.js";import{c as te}from"./strings.NpL5U0Vf.js";import{t as le}from"./error.D_Dr4eZ1.js";import{t as se}from"./toNumber.CmdCAqzi.js";import{U as ne}from"./event.BwRzfsZt.js";import{u as oe}from"./index.D4kWfsUP.js";import{g as re,b as ie}from"./_baseClone.C4yMf0XY.js";import{c as ue}from"./_initCloneObject.BYc1Qx2n.js";import{a as de}from"./index.DXHChytE.js";function ve(a,t){return t.length<2?a:e(a,function(e,a,t){var l=-1,s=e.length;a<0&&(a=-a>s?0:s+a),(t=t>s?s:t)<0&&(t+=s),s=a>t?0:t-a>>>0,a>>>=0;for(var n=Array(s);++l<s;)n[l]=e[l+a];return n}(t,0,-1))}function ce(e,l){return null==(e=ve(e,l=a(l,e)))||delete e[t((s=l,n=null==s?0:s.length,n?s[n-1]:void 0))];var s,n}function be(e){return Q(e)?void 0:e}var pe=de(function(e,t){var s={};if(null==e)return s;var n=!1;t=l(t,function(t){return t=a(t,e),n||(n=t.length>1),t}),ue(e,re(e),s),n&&(s=ie(s,7,be));for(var o=t.length;o--;)ce(s,t[o]);return s});const fe="horizontal",me="vertical",he={[fe]:"deltaX",[me]:"deltaY"},ge=Symbol("tabsRootContextKey"),ye=n({tabs:{type:r(Array),default:()=>o([])},tabRefs:{type:r(Object),default:()=>o({})}}),we="ElTabBar",xe=u({name:we});var Ce=i(u({...xe,props:ye,setup(e,{expose:a}){const t=e,l=d(ge);l||le(we,"<el-tabs><el-tab-bar /></el-tabs>");const s=v("tabs"),n=c(),o=c(),r=()=>o.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(x(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${te(o)}`],a=n[`client${te(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${te(n)}(${e}px)`}})(),i=[];b(()=>t.tabs,async()=>{await C(),r(),i.forEach(e=>e.stop()),i.length=0,Object.values(t.tabRefs).forEach(e=>{i.push(p(e,r))})},{immediate:!0});const u=p(n,()=>r());return f(()=>{i.forEach(e=>e.stop()),i.length=0,u.stop()}),a({ref:n,update:r}),(e,a)=>(h(),m("div",{ref_key:"barRef",ref:n,class:y([w(s).e("active-bar"),w(s).is(w(l).props.tabPosition)]),style:g(o.value)},null,6))}}),[["__file","tab-bar.vue"]]);const $e=n({panes:{type:r(Array),default:()=>o([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ee="ElTabNav",Pe=u({name:Ee,props:$e,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=d(ge);l||le(Ee,"<el-tabs><tab-nav /></el-tabs>");const n=v("tabs"),o=$(),r=E(),i=c(),u=c(),f=c(),m=c({}),h=c(),g=c(!1),y=c(0),w=c(!1),x=c(!0),z=P(),K=R(()=>["top","bottom"].includes(l.props.tabPosition)),O=R(()=>K.value?"width":"height"),M=R(()=>({transform:`translate${"width"===O.value?"X":"Y"}(-${y.value}px)`})),{width:W,height:I}=N(i),{width:U,height:q}=N(u,{width:0,height:0},{box:"border-box"}),D=R(()=>K.value?W.value:I.value),G=R(()=>K.value?U.value:q.value),{onWheel:H}=(({atEndEdge:e,atStartEdge:a,layout:t},l)=>{let n,o=0;const r=t=>t<0&&a.value||t>0&&e.value;return{hasReachedEdge:r,onWheel:e=>{ee(n);const a=e[he[t.value]];r(o)&&r(o+a)||(o+=a,s()||e.preventDefault(),n=ae(()=>{l(o),o=0}))}}})({atStartEdge:R(()=>y.value<=0),atEndEdge:R(()=>G.value-y.value<=D.value),layout:R(()=>K.value?"horizontal":"vertical")},e=>{var a,t,l;y.value=(a=y.value+e,t=0,void 0===(l=G.value-D.value)&&(l=t,t=void 0),void 0!==l&&(l=(l=se(l))==l?l:0),void 0!==t&&(t=(t=se(t))==t?t:0),function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(se(a),t,l))}),X=()=>{if(!i.value)return;const e=i.value[`offset${te(O.value)}`],a=y.value;if(!a)return;const t=a>e?a-e:0;y.value=t},Y=()=>{if(!i.value||!u.value)return;const e=u.value[`offset${te(O.value)}`],a=i.value[`offset${te(O.value)}`],t=y.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;y.value=l},Z=async()=>{const a=u.value;if(!(g.value&&f.value&&i.value&&a))return;await C();const t=m.value[e.currentName];if(!t)return;const l=i.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=K.value?a.offsetWidth-n.width:a.offsetHeight-n.height,r=y.value;let d=r;K.value?(s.left<n.left&&(d=r-(n.left-s.left)),s.right>n.right&&(d=r+s.right-n.right)):(s.top<n.top&&(d=r-(n.top-s.top)),s.bottom>n.bottom&&(d=r+(s.bottom-n.bottom))),d=Math.max(d,0),y.value=Math.min(d,o)},J=()=>{var a;if(!u.value||!i.value)return;e.stretch&&(null==(a=h.value)||a.update());const t=u.value[`offset${te(O.value)}`],l=i.value[`offset${te(O.value)}`],s=y.value;l<t?(g.value=g.value||{},g.value.prev=s,g.value.next=s+l<t,t-s<l&&(y.value=t-l)):(g.value=!1,s>0&&(y.value=0))},Q=e=>{let a=0;switch(_(e)){case L.left:case L.up:a=-1;break;case L.right:case L.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),ne()},ne=()=>{x.value&&(w.value=!0)},oe=()=>w.value=!1;return b(o,e=>{"hidden"===e?x.value=!1:"visible"===e&&setTimeout(()=>x.value=!0,50)}),b(r,e=>{e?setTimeout(()=>x.value=!0,50):x.value=!1}),p(f,J),k(()=>setTimeout(()=>Z(),0)),T(()=>J()),a({scrollToActiveTab:Z,removeFocus:oe,focusActiveTab:async()=>{await C();const a=m.value[e.currentName];null==a||a.focus({preventScroll:!0})},tabListRef:u,tabBarRef:h,scheduleRender:()=>B(z)}),()=>{const a=g.value?[S("span",{class:[n.e("nav-prev"),n.is("disabled",!g.value.prev)],onClick:X},[S(j,null,{default:()=>[S(A,null,null)]})]),S("span",{class:[n.e("nav-next"),n.is("disabled",!g.value.next)],onClick:Y},[S(j,null,{default:()=>[S(F,null,null)]})])]:null,s=e.panes.map((a,s)=>{var o,r,i,u;const d=a.uid,v=a.props.disabled,c=null!=(r=null!=(o=a.props.name)?o:a.index)?r:`${s}`,b=!v&&(a.isClosable||!1!==a.props.closable&&e.editable);a.index=`${s}`;const p=b?S(j,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[S(V,null,null)]}):null,f=(null==(u=(i=a.slots).label)?void 0:u.call(i))||a.props.label,h=!v&&a.active?0:-1;return S("div",{ref:e=>((e,a)=>{m.value[a]=e})(e,c),class:[n.e("item"),n.is(l.props.tabPosition),n.is("active",a.active),n.is("disabled",v),n.is("closable",b),n.is("focus",w.value)],id:`tab-${c}`,key:`tab-${d}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":a.active,tabindex:h,onFocus:()=>ne(),onBlur:()=>oe(),onClick:e=>{oe(),t("tabClick",a,c,e)},onKeydown:e=>{const l=_(e);!b||l!==L.delete&&l!==L.backspace||t("tabRemove",a,e)}},[f,p])});return z.value,S("div",{ref:f,class:[n.e("nav-wrap"),n.is("scrollable",!!g.value),n.is(l.props.tabPosition)]},[a,S("div",{class:n.e("nav-scroll"),ref:i},[e.panes.length>0?S("div",{class:[n.e("nav"),n.is(l.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:u,style:M.value,role:"tablist",onKeydown:Q,onWheel:H},[e.type?null:S(Ce,{ref:h,tabs:[...e.panes],tabRefs:m.value},null),s]):null])])}}}),Re=n({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:r(Function),default:()=>!0},stretch:Boolean}),Ne=e=>z(e)||K(e);var ke=u({name:"ElTabs",props:Re,emits:{[ne]:e=>Ne(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>Ne(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>Ne(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=v("tabs"),o=R(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:i,removeChild:u,ChildrenSorter:d}=oe(W(),"ElTabPane"),p=c(),f=c(null!=(s=e.modelValue)?s:"0"),m=async(t,l=!1)=>{var s,n,o,i;if(f.value!==t&&!x(t))try{let u;if(e.beforeLeave){const a=e.beforeLeave(t,f.value);u=a instanceof Promise?await a:a}else u=!0;if(!1!==u){const e=null==(s=r.value.find(e=>e.paneName===f.value))?void 0:s.isFocusInsidePane();f.value=t,l&&(a(ne,t),a("tabChange",t)),null==(o=null==(n=p.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(i=p.value)||i.focusActiveTab())}}catch(u){}},h=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),m(t,!0))},g=(e,t)=>{e.props.disabled||x(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},y=()=>{a("edit",void 0,"add"),a("tabAdd")},w=e=>{const a=_(e);[L.enter,L.numpadEnter].includes(a)&&y()},$=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return b(()=>e.modelValue,e=>m(e)),b(f,async()=>{var e;await C(),null==(e=p.value)||e.scrollToActiveTab()}),I(ge,{props:e,currentName:f,registerPane:i,unregisterPane:u,nav$:p}),l({currentName:f,get tabNavRef(){return pe(p.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?S("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:y,onKeydown:w},[a?O(t,"add-icon"):S(j,{class:n.is("icon-plus")},{default:()=>[S(M,null,null)]})]):null,s=S("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[S(d,null,{default:()=>S(Pe,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:h,onTabRemove:g},null),$stable:!0}),l]),i=S("div",{class:n.e("content")},[O(t,"default")]);return S("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:$,onVnodeUpdated:$},[i,s])}}});const Te=n({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Be="ElTabPane",Se=u({name:Be});var je=i(u({...Se,props:Te,setup(e){const a=e,t=W(),l=U(),s=d(ge);s||le(Be,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=v("tab-pane"),o=c(),r=c(),i=R(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),u=q(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:r.value)}),p=c(u.value),g=R(()=>{var e;return null!=(e=a.name)?e:r.value}),x=q(()=>!a.lazy||p.value||u.value);b(u,e=>{e&&(p.value=!0)});const C=D({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:g,active:u,index:r,isClosable:i,isFocusInsidePane:()=>{var e;return null==(e=o.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(C),f(()=>{s.unregisterPane(C)}),G(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>w(x)?H((h(),m("div",{key:0,id:`pane-${w(g)}`,ref_key:"paneRef",ref:o,class:y(w(n).b()),role:"tabpanel","aria-hidden":!w(u),"aria-labelledby":`tab-${w(g)}`},[O(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Y,w(u)]]):X("v-if",!0)}}),[["__file","tab-pane.vue"]]);const Ae=Z(ke,{TabPane:je}),Fe=J(je);export{Fe as E,Ae as a};
