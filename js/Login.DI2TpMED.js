import{d as e,aE as a,aJ as l,ap as r,r as s,be as i,c as o,as as t,g as n,f as d,C as m,m as p,F as u,i as c,w as g,E as f,a3 as v,a4 as x,ay as _,bf as j}from"./index.BRkeMZJ3.js";import{E as h}from"./text.CBSgRwvb.js";import{E as w,a as b}from"./form-item.JlMsiVsg.js";/* empty css               */import{E as y}from"./link.CdKuLgwl.js";import{E as C}from"./checkbox.Dpesx2gT.js";/* empty css                */import{E as V}from"./popper.DER5TYS7.js";import{E as k}from"./input.Bux73yZ-.js";import{C as E}from"./index.DlmWo45U.js";import{E as M}from"./index.BR6POwKd.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./use-form-common-props.CqA0Qg8c.js";import"./castArray.pFen9Tkv.js";import"./error.D_Dr4eZ1.js";import"./_baseClone.BF5RejrX.js";import"./_initCloneObject.J_PfCM3P.js";import"./index.wVkM0nba.js";import"./index.BRiHEm1a.js";import"./event.BwRzfsZt.js";import"./index.Cuc277AH.js";import"./aria.Cpd_B0tV.js";import"./index.DD4tnXLg.js";import"./index.CHnr7aKg.js";import"./index.VuFFzU1E.js";const L={"text-center":"","m-0":"","mb-20px":""},U={class:"flex-x-between w-full"},K={"flex-center":"","gap-10px":""},R={class:"third-party-login"},z={class:"divider-container"},A={class:"divider-text"},B={class:"flex-center gap-x-5 w-full text-[var(--el-text-color-secondary)]"},F=q(e({__name:"Login",emits:["update:modelValue"],setup(e,{emit:q}){const{t:F}=a(),I=l(),P=r(),S=s(),D=s(!1),G=s(!1),J=s(),O=i.getRememberMe(),Q=s({email:"demo@example.com",password:"password",rememberMe:O}),Z=o(()=>({email:[{required:!0,trigger:"blur",message:F("login.message.email.required")}],password:[{required:!0,trigger:"blur",message:F("login.message.password.required")},{min:6,message:F("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:F("login.message.captchaCode.required")}]})),$=s(!1);async function H(){try{if(!(await(S.value?.validate())))return;D.value=!0,await I.login(Q.value);const e=P.query.redirect||"/";await _.push(decodeURIComponent(e))}catch(e){$.value=!0,j.getCaptcha().then(e=>{const a=e.data;Q.value.captchaKey=a.captchaKey,J.value=a.captchaBase64}).finally(()=>$.value=!1)}finally{D.value=!1}}function N(e){e instanceof KeyboardEvent&&(G.value=e.getModifierState("CapsLock"))}const T=q;function W(e){T("update:modelValue",e)}return(e,a)=>{const l=t("User"),r=f,s=k,i=w,o=t("Lock"),_=V,j=C,q=y,I=M,P=b,J=h;return d(),n("div",null,[m("h3",L,u(c(F)("login.login")),1),p(P,{ref_key:"loginFormRef",ref:S,model:c(Q),rules:c(Z),size:"large","validate-on-rule-change":!1},{default:g(()=>[p(i,{prop:"email"},{default:g(()=>[p(s,{modelValue:c(Q).email,"onUpdate:modelValue":a[0]||(a[0]=e=>c(Q).email=e),modelModifiers:{trim:!0},placeholder:c(F)("login.email")},{prefix:g(()=>[p(r,null,{default:g(()=>[p(l)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),p(_,{visible:c(G),content:c(F)("login.capsLock"),placement:"right"},{default:g(()=>[p(i,{prop:"password"},{default:g(()=>[p(s,{modelValue:c(Q).password,"onUpdate:modelValue":a[1]||(a[1]=e=>c(Q).password=e),modelModifiers:{trim:!0},placeholder:c(F)("login.password"),type:"password","show-password":"",onKeyup:[N,v(H,["enter"])]},{prefix:g(()=>[p(r,null,{default:g(()=>[p(o)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["visible","content"]),m("div",U,[p(j,{modelValue:c(Q).rememberMe,"onUpdate:modelValue":a[2]||(a[2]=e=>c(Q).rememberMe=e)},{default:g(()=>[x(u(c(F)("login.rememberMe")),1)]),_:1},8,["modelValue"]),p(q,{type:"primary",underline:"never",onClick:a[3]||(a[3]=e=>W("resetPwd"))},{default:g(()=>[x(u(c(F)("login.forgetPassword")),1)]),_:1})]),p(i,null,{default:g(()=>[p(I,{loading:c(D),type:"primary",class:"w-full",onClick:H},{default:g(()=>[x(u(c(F)("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),m("div",K,[p(J,{size:"default"},{default:g(()=>[x(u(c(F)("login.noAccount")),1)]),_:1}),p(q,{type:"primary",underline:"never",onClick:a[4]||(a[4]=e=>W("register"))},{default:g(()=>[x(u(c(F)("login.reg")),1)]),_:1})]),m("div",R,[m("div",z,[a[5]||(a[5]=m("div",{class:"divider-line"},null,-1)),m("span",A,u(c(F)("login.otherLoginMethods")),1),a[6]||(a[6]=m("div",{class:"divider-line"},null,-1))]),m("div",B,[p(E,null,{default:g(()=>[...a[7]||(a[7]=[m("div",{"text-20px":"",class:"i-svg:wechat"},null,-1)])]),_:1}),p(E,null,{default:g(()=>[...a[8]||(a[8]=[m("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:qq"},null,-1)])]),_:1}),p(E,null,{default:g(()=>[...a[9]||(a[9]=[m("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:github"},null,-1)])]),_:1}),p(E,null,{default:g(()=>[...a[10]||(a[10]=[m("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:gitee"},null,-1)])]),_:1})])])])}}}),[["__scopeId","data-v-9ad33064"]]);export{F as default};
