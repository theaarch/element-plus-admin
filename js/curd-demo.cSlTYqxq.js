import{u as e,_ as t,a as r,b as a}from"./usePage._uv8DHGO.js";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang.BWd5rRtr.js";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang.BjY4Sjsj.js";import{d as i,r as s,S as p,b9 as n,ak as m,aq as d,o as c,g as u,f as g,C as b,m as f,w as h,a4 as j,i as y,e as x,h as w,F as k,Z as _}from"./index.DRPoGZBk.js";import{E as v}from"./text.B0WblZFB.js";import{_ as C}from"./DictLabel.vue_vue_type_script_setup_true_lang.CIvc-V1Q.js";/* empty css            */import{E as A}from"./link.CM2ZuMlr.js";import{D as V}from"./dept-api.BT8kzwGZ.js";import{R as D}from"./roles.Ds-Fh_hy.js";/* empty css                *//* empty css                    *//* empty css               */import"./input.CQ-26BBh.js";import"./overlay.2CFaBIuz.js";import{E as R}from"./index.CjQJJCUT.js";import{E as S}from"./index.CHumVb_u.js";import{E}from"./index.B9FqeKvr.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./scrollbar.psmrftie.js";import"./error.D_Dr4eZ1.js";import"./index.F5OfedVa.js";import"./drawer.ChYI8lnM.js";import"./index.SISkM0HS.js";import"./aria.Cpd_B0tV.js";import"./index.C88r2BaC.js";import"./form-item.BX728IAv.js";import"./use-form-common-props.DsMPcFL7.js";import"./castArray.DubCdOyv.js";import"./_baseClone.CEh0Izpu.js";import"./_initCloneObject.CljjGAhF.js";import"./col.7XykCHxG.js";import"./typescript.CRqm1_SZ.js";/* empty css                */import"./popper.BU17CZ-L.js";import"./index.YVQhVyFI.js";import"./index.DR-8yd7G.js";import"./popover.yPGSVALT.js";import"./dropdown.BgHO8JHY.js";import"./tab-pane.F6q0eGgE.js";import"./raf.Rxgr8PiF.js";import"./strings.aj8LsXir.js";import"./toNumber.BFSSBEJo.js";import"./event.BwRzfsZt.js";import"./index.C5i-CAZ-.js";import"./vnode.BI5jxDcy.js";import"./select.Dg8cxWuu.js";import"./token.DWNpOE8r.js";import"./index.cDg2wPYz.js";import"./scroll.EvVlGgaK.js";import"./debounce.DQPPIhOy.js";import"./_baseIteratee.CeiHmyQH.js";import"./index.CJYjkF3a.js";import"./switch.CbQZtCc2.js";import"./checkbox.HknQRT7E.js";import"./radio-group.DBQ1zoyi.js";import"./input-number.qAAz36QG.js";import"./index.CuviTts7.js";import"./date-picker-panel.CAlEuNg7.js";import"./dayjs.min.DqgPjcVY.js";import"./index.CATG-Bau.js";import"./index.CQZWqeco.js";import"./tree.C7HEleVO.js";import"./index.CfNIqZzg.js";import"./tree-select.C98Oyw_c.js";/* empty css                       */import"./loading.DIBzycS9.js";import"./upload.PyYNndzD.js";import"./progress.CHZRpn5t.js";import"./pagination.HPmRLtz8.js";import"./table-column.C2ueaBaa.js";import"./image-viewer.CRnANsF-.js";import"./card.QxKCHOda.js";import"./refs.Cw5r5QN8.js";const z={class:"app-container h-full flex flex-1 flex-col"},P={class:"mb-10"},T=I(i({name:"CurdDemo",inheritAttrs:!1,__name:"curd-demo",setup(i){const I=s([]),T=s([]),q=s([{label:"启用",value:1},{label:"禁用",value:0}]),F=p({permPrefix:"sys:user",formItems:[{tips:"支持模糊搜索",type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:I,filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"200px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"200px"}},options:q},{type:"date-picker",label:"创建时间",prop:"createTime",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"200px"}}}]}),M=p({permPrefix:"sys:user",table:{border:!0,highlightCurrentRow:!0},pagination:{background:!0,layout:"prev,pager,next,jumper,total,sizes",pageSize:20,pageSizes:[10,20,30,50]},parseData:e=>({total:e.total,list:e.list}),indexAction:e=>n.getPage(e),deleteAction:n.deleteByIds,importAction:e=>n.import("1",e),exportAction:n.export,importTemplate:n.downloadTemplate,importsAction:e=>Promise.resolve(),exportsAction:async e=>(await n.getPage(e)).list,pk:"id",toolbar:["add","delete","import","export",{name:"custom1",text:"自定义1",perm:"add",attrs:{icon:"plus",color:"#626AEF"}}],defaultToolbar:["refresh","filter","imports","exports","search"],cols:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100,show:!1},{label:"用户名",align:"center",prop:"username"},{label:"头像",align:"center",prop:"avatar",templet:"image"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"gender",width:100,templet:"custom",slotName:"gender"},{label:"部门",align:"center",prop:"deptName",width:120},{label:"角色",align:"center",prop:"roleNames",width:120,columnKey:"roleIds",filters:[],filterMultiple:!0,filterJoin:",",async initFn(e){const t=await D.getOptions();e.filters=t.map(e=>({text:e.label,value:e.value}))}},{label:"手机号码",align:"center",prop:"mobile",templet:"custom",slotName:"mobile",width:150},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180},{label:"操作",align:"center",fixed:"right",width:280,templet:"tool",operat:[{name:"detail",text:"详情",attrs:{icon:"Document",type:"primary"}},{name:"reset_pwd",text:"重置密码",attrs:{icon:"refresh-left",style:{"--el-button-text-color":"#626AEF","--el-button-hover-link-text-color":"#9197f4"}}},"edit","delete"]}]}),Z=p({permPrefix:"sys:user",dialog:{title:"新增用户",width:800,draggable:!0},form:{labelWidth:100},formAction:n.create,beforeSubmit(e){},formItems:[{label:"用户名",prop:"username",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户名"},col:{xs:24,sm:12}},{label:"用户昵称",prop:"nickname",rules:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户昵称"},col:{xs:24,sm:12}},{label:"所属部门",prop:"deptId",rules:[{required:!0,message:"所属部门不能为空",trigger:"change"}],type:"tree-select",attrs:{placeholder:"请选择所属部门",data:I,filterable:!0,"check-strictly":!0,"render-after-expand":!1}},{type:"custom",label:"性别",prop:"gender",initialValue:1,attrs:{style:{width:"100%"}}},{label:"角色",prop:"roleIds",rules:[{required:!0,message:"用户角色不能为空",trigger:"change"}],type:"select",attrs:{placeholder:"请选择",multiple:!0},options:T,initialValue:[]},{type:"input",label:"手机号码",prop:"mobile",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{placeholder:"请输入手机号码",maxlength:11}},{label:"邮箱",prop:"email",rules:[{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,message:"请输入正确的邮箱地址",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入邮箱",maxlength:50}},{label:"状态",prop:"status",type:"radio",options:[{label:"正常",value:1},{label:"禁用",value:0}],initialValue:1}]}),N=p({permPrefix:"sys:user",component:"drawer",drawer:{title:"修改用户",size:m().device===d.MOBILE?"80%":500},pk:"id",beforeSubmit(e){},formAction:e=>n.update(e.id,e),formItems:[{label:"用户名",prop:"username",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户名",readonly:!0}},{label:"用户昵称",prop:"nickname",rules:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户昵称"}},{label:"所属部门",prop:"deptId",rules:[{required:!0,message:"所属部门不能为空",trigger:"blur"}],type:"tree-select",attrs:{placeholder:"请选择所属部门",data:I,filterable:!0,"check-strictly":!0,"render-after-expand":!1}},{type:"custom",label:"性别",prop:"gender",initialValue:1,attrs:{style:{width:"100%"}}},{label:"角色",prop:"roleIds",rules:[{required:!0,message:"用户角色不能为空",trigger:"blur"}],type:"select",attrs:{placeholder:"请选择",multiple:!0},options:T,initialValue:[]},{type:"input",label:"手机号码",prop:"mobile",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{placeholder:"请输入手机号码",maxlength:11}},{label:"邮箱",prop:"email",rules:[{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,message:"请输入正确的邮箱地址",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入邮箱",maxlength:50}},{label:"状态",prop:"status",type:"switch",attrs:{inlinePrompt:!0,activeText:"正常",inactiveText:"禁用",activeValue:1,inactiveValue:0}}]}),{searchRef:O,contentRef:U,addModalRef:Y,editModalRef:B,handleQueryClick:Q,handleResetClick:$,handleAddClick:J,handleEditClick:K,handleViewClick:L,handleSubmitClick:W,handleExportClick:X,handleSearchClick:G,handleFilterChange:H}=e();function ee(e){"custom1"===e&&S.success("点击了自定义1按钮")}const te=e=>{"detail"===e.name?(N.drawer={...N.drawer,title:"查看"},L(e.row,async()=>await n.getFormData(e.row.id))):"edit"===e.name?(N.drawer={...N.drawer,title:"修改"},K(e.row,async()=>await n.getFormData(e.row.id))):"reset_pwd"===e.name&&E.prompt("请输入用户「"+e.row.username+"」的新密码","重置密码",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:t})=>{if(!t||t.length<6)return S.warning("密码至少需要6位字符，请重新输入"),!1;n.resetPassword(e.row.id,t).then(()=>{S.success("密码重置成功，新密码是："+t)})}).catch(()=>{})};return c(()=>{(async()=>{try{const[e,t]=await Promise.all([V.getOptions(),D.getOptions()]);I.value=e,T.value=t}catch(e){}})()}),(e,i)=>{const s=A,p=t,n=R,m=C,d=v,c=o,V=r,D=l,S=a;return g(),u("div",z,[b("div",P,[f(s,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/curd-demo.vue",type:"primary",target:"_blank"},{default:h(()=>[...i[0]||(i[0]=[j(" 整合版示例源码 请点击>>>> ",-1)])]),_:1})]),f(p,{ref_key:"searchRef",ref:O,"search-config":y(F),onQueryClick:y(Q),onResetClick:y($)},null,8,["search-config","onQueryClick","onResetClick"]),f(V,{ref_key:"contentRef",ref:U,"content-config":y(M),onAddClick:y(J),onExportClick:y(X),onSearchClick:y(G),onToolbarClick:ee,onOperateClick:te,onFilterChange:y(H)},{status:h(e=>[f(n,{type:1==e.row[e.prop]?"success":"info"},{default:h(()=>[j(k(1==e.row[e.prop]?"启用":"禁用"),1)]),_:2},1032,["type"])]),gender:h(e=>[f(m,{modelValue:e.row[e.prop],"onUpdate:modelValue":t=>e.row[e.prop]=t,code:"gender"},null,8,["modelValue","onUpdate:modelValue"])]),mobile:h(e=>[f(d,null,{default:h(()=>[j(k(e.row[e.prop]),1)]),_:2},1024),e.row[e.prop]?(g(),x(c,{key:0,text:e.row[e.prop],style:{"margin-left":"2px"}},null,8,["text"])):w("",!0)]),_:1},8,["content-config","onAddClick","onExportClick","onSearchClick","onFilterChange"]),f(S,{ref_key:"addModalRef",ref:Y,"modal-config":y(Z),onSubmitClick:y(W)},{gender:h(e=>[f(D,_({modelValue:e.formData[e.prop],"onUpdate:modelValue":t=>e.formData[e.prop]=t,code:"gender"},e.attrs),null,16,["modelValue","onUpdate:modelValue"])]),_:1},8,["modal-config","onSubmitClick"]),f(S,{ref_key:"editModalRef",ref:B,"modal-config":y(N),onSubmitClick:y(W)},{gender:h(e=>[f(D,_({modelValue:e.formData[e.prop],"onUpdate:modelValue":t=>e.formData[e.prop]=t,code:"gender"},e.attrs),null,16,["modelValue","onUpdate:modelValue"])]),_:1},8,["modal-config","onSubmitClick"])])}}}),[["__scopeId","data-v-56a416b5"]]);export{T as default};
