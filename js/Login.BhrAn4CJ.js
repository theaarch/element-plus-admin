import{d as e,aE as a,aJ as r,ap as s,o as l,r as o,be as t,c as i,bf as n,as as d,g as u,f as p,C as m,m as c,F as g,i as f,w as v,E as x,a3 as _,a4 as j,ay as h}from"./index.E9z8D5h3.js";import{E as w}from"./text.DhZcpqMV.js";import{E as y,a as b}from"./form-item.B-TrMLns.js";/* empty css               */import{E as C}from"./link.URuvpr0s.js";import{E as V}from"./checkbox.a_My_a7Z.js";/* empty css                */import{E as q}from"./popper.Dtreu0eM.js";import{E}from"./input.CEheeq8y.js";import{C as k}from"./index.4vv3TLfQ.js";import{E as M}from"./index.CatjLWM2.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./use-form-common-props.CcgMl9t_.js";import"./castArray.DxNKh-jV.js";import"./error.D_Dr4eZ1.js";import"./_baseClone.xYzdYpxW.js";import"./_initCloneObject.CIAV6yX2.js";import"./index.nhgAOGTU.js";import"./index.CQF0MTxJ.js";import"./event.BwRzfsZt.js";import"./index.DAjEjg1V.js";import"./aria.Cpd_B0tV.js";import"./index.BlrpoF__.js";import"./index.DCjuzFt4.js";import"./index.CO2c8h_7.js";const K={"text-center":"","m-0":"","mb-20px":""},U={class:"flex-x-between w-full"},R={"flex-center":"","gap-10px":""},z={class:"third-party-login"},A={class:"divider-container"},F={class:"divider-text"},P={class:"flex-center gap-x-5 w-full text-[var(--el-text-color-secondary)]"},I=L(e({__name:"Login",emits:["update:modelValue"],setup(e,{emit:L}){const{t:I}=a(),B=r(),J=s();l(()=>T());const O=o(),Q=o(!1),S=o(!1),Y=o(),D=t.getRememberMe(),G=o({username:"admin",password:"123456",captchaKey:"",captchaCode:"",rememberMe:D}),H=i(()=>({username:[{required:!0,trigger:"blur",message:I("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:I("login.message.password.required")},{min:6,message:I("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:I("login.message.captchaCode.required")}]})),N=o(!1);function T(){N.value=!0,n.getCaptcha().then(e=>{G.value.captchaKey=e.captchaKey,Y.value=e.captchaBase64}).finally(()=>N.value=!1)}async function W(){try{if(!(await(O.value?.validate())))return;Q.value=!0,await B.login(G.value);const e=J.query.redirect||"/";await h.push(decodeURIComponent(e))}catch(e){T()}finally{Q.value=!1}}function X(e){e instanceof KeyboardEvent&&(S.value=e.getModifierState("CapsLock"))}const Z=L;function $(e){Z("update:modelValue",e)}return(e,a)=>{const r=d("User"),s=x,l=E,o=y,t=d("Lock"),i=q,n=V,h=C,L=M,B=b,J=w;return p(),u("div",null,[m("h3",K,g(f(I)("login.login")),1),c(B,{ref_key:"loginFormRef",ref:O,model:f(G),rules:f(H),size:"large","validate-on-rule-change":!1},{default:v(()=>[c(o,{prop:"username"},{default:v(()=>[c(l,{modelValue:f(G).username,"onUpdate:modelValue":a[0]||(a[0]=e=>f(G).username=e),modelModifiers:{trim:!0},placeholder:f(I)("login.username")},{prefix:v(()=>[c(s,null,{default:v(()=>[c(r)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),c(i,{visible:f(S),content:f(I)("login.capsLock"),placement:"right"},{default:v(()=>[c(o,{prop:"password"},{default:v(()=>[c(l,{modelValue:f(G).password,"onUpdate:modelValue":a[1]||(a[1]=e=>f(G).password=e),modelModifiers:{trim:!0},placeholder:f(I)("login.password"),type:"password","show-password":"",onKeyup:[X,_(W,["enter"])]},{prefix:v(()=>[c(s,null,{default:v(()=>[c(t)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1},8,["visible","content"]),m("div",U,[c(n,{modelValue:f(G).rememberMe,"onUpdate:modelValue":a[2]||(a[2]=e=>f(G).rememberMe=e)},{default:v(()=>[j(g(f(I)("login.rememberMe")),1)]),_:1},8,["modelValue"]),c(h,{type:"primary",underline:"never",onClick:a[3]||(a[3]=e=>$("resetPwd"))},{default:v(()=>[j(g(f(I)("login.forgetPassword")),1)]),_:1})]),c(o,null,{default:v(()=>[c(L,{loading:f(Q),type:"primary",class:"w-full",onClick:W},{default:v(()=>[j(g(f(I)("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),m("div",R,[c(J,{size:"default"},{default:v(()=>[j(g(f(I)("login.noAccount")),1)]),_:1}),c(h,{type:"primary",underline:"never",onClick:a[4]||(a[4]=e=>$("register"))},{default:v(()=>[j(g(f(I)("login.reg")),1)]),_:1})]),m("div",z,[m("div",A,[a[5]||(a[5]=m("div",{class:"divider-line"},null,-1)),m("span",F,g(f(I)("login.otherLoginMethods")),1),a[6]||(a[6]=m("div",{class:"divider-line"},null,-1))]),m("div",P,[c(k,null,{default:v(()=>[...a[7]||(a[7]=[m("div",{"text-20px":"",class:"i-svg:wechat"},null,-1)])]),_:1}),c(k,null,{default:v(()=>[...a[8]||(a[8]=[m("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:qq"},null,-1)])]),_:1}),c(k,null,{default:v(()=>[...a[9]||(a[9]=[m("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:github"},null,-1)])]),_:1}),c(k,null,{default:v(()=>[...a[10]||(a[10]=[m("div",{"text-20px":"","cursor-pointer":"",class:"i-svg:gitee"},null,-1)])]),_:1})])])])}}}),[["__scopeId","data-v-eec4c351"]]);export{I as default};
