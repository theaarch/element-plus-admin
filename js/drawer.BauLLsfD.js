import{t as e,c8 as a,c as s,c9 as l,r as t,I as o,u as r,aa as i,J as d,_ as n,d as u,bC as f,b as c,x as v,e as p,f as b,w as y,m,T as h,i as g,$ as k,C,Z as w,j as z,g as A,h as E,n as R,l as x,F,E as _,a2 as L,k as $,a1 as T,q as B}from"./index.E9z8D5h3.js";import{d as I,a as S,u as j,E as H}from"./overlay.Ca4AGuM5.js";import{E as q,a as P}from"./index.DAjEjg1V.js";import{u as D}from"./index.nhgAOGTU.js";const O=e({...S,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),X=I;function Y(e,n){const{width:u,height:f}=a(),c=s(()=>["ltr","rtl"].includes(e.direction)),v=s(()=>["ltr","ttb"].includes(e.direction)?1:-1),p=s(()=>c.value?u.value:f.value),b=s(()=>l(y.value+v.value*m.value,4,p.value)),y=t(0),m=t(0),h=t(!1),g=t(!1);let k=[],C=[];o(()=>[e.size,e.resizable],()=>{g.value=!1,y.value=0,m.value=0,z()});const w=e=>{const{pageX:a,pageY:s}=e,l=a-k[0],t=s-k[1];m.value=c.value?l:t},z=()=>{k=[],y.value=b.value,m.value=0,h.value=!1,C.forEach(e=>null==e?void 0:e()),C=[]},A=r(n,"mousedown",a=>{e.resizable&&(g.value||(y.value=(()=>{var e;const a=null==(e=n.value)?void 0:e.closest('[aria-modal="true"]');return a?c.value?a.offsetWidth:a.offsetHeight:100})(),g.value=!0),k=[a.pageX,a.pageY],h.value=!0,C.push(r(window,"mouseup",z),r(window,"mousemove",w)))});return i(()=>{A(),z()}),{size:s(()=>g.value?`${b.value}px`:d(e.size)),isResizing:h,isHorizontal:c}}const J=u({name:"ElDrawer",inheritAttrs:!1});const M=B(n(u({...J,props:O,emits:X,setup(e,{expose:a}){const l=e,o=f();D({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},s(()=>!!o.title));const r=t(),i=t(),d=t(),n=c("drawer"),{t:u}=v(),{afterEnter:B,afterLeave:I,beforeLeave:S,visible:O,rendered:X,titleId:J,bodyId:M,zIndex:N,onModalClick:U,onOpenAutoFocus:W,onCloseAutoFocus:Z,onFocusoutPrevented:G,onCloseRequested:K,handleClose:Q}=j(l,r),{isHorizontal:V,size:ee,isResizing:ae}=Y(l,d);return a({handleClose:Q,afterEnter:B,afterLeave:I}),(e,a)=>(b(),p(g(P),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:y(()=>[m(h,{name:g(n).b("fade"),onAfterEnter:g(B),onAfterLeave:g(I),onBeforeLeave:g(S),persisted:""},{default:y(()=>{var a;return[k(m(g(H),{mask:e.modal,"overlay-class":[g(n).is("drawer"),null!=(a=e.modalClass)?a:""],"z-index":g(N),onClick:g(U)},{default:y(()=>[m(g(q),{loop:"",trapped:g(O),"focus-trap-el":r.value,"focus-start-el":i.value,onFocusAfterTrapped:g(W),onFocusAfterReleased:g(Z),onFocusoutPrevented:g(G),onReleaseRequested:g(K)},{default:y(()=>[C("div",w({ref_key:"drawerRef",ref:r,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:g(J),"aria-describedby":g(M)},e.$attrs,{class:[g(n).b(),e.direction,g(O)&&"open",g(n).is("dragging",g(ae))],style:{[g(V)?"width":"height"]:g(ee)},role:"dialog",onClick:z(()=>{},["stop"])}),[C("span",{ref_key:"focusStartRef",ref:i,class:R(g(n).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(b(),A("header",{key:0,class:R([g(n).e("header"),e.headerClass])},[e.$slots.title?x(e.$slots,"title",{key:1},()=>[E(" DEPRECATED SLOT ")]):x(e.$slots,"header",{key:0,close:g(Q),titleId:g(J),titleClass:g(n).e("title")},()=>[C("span",{id:g(J),role:"heading","aria-level":e.headerAriaLevel,class:R(g(n).e("title"))},F(e.title),11,["id","aria-level"])]),e.showClose?(b(),A("button",{key:2,"aria-label":g(u)("el.drawer.close"),class:R(g(n).e("close-btn")),type:"button",onClick:g(Q)},[m(g(_),{class:R(g(n).e("close"))},{default:y(()=>[m(g(L))]),_:1},8,["class"])],10,["aria-label","onClick"])):E("v-if",!0)],2)):E("v-if",!0),g(X)?(b(),A("div",{key:1,id:g(M),class:R([g(n).e("body"),e.bodyClass])},[x(e.$slots,"default")],10,["id"])):E("v-if",!0),e.$slots.footer?(b(),A("div",{key:2,class:R([g(n).e("footer"),e.footerClass])},[x(e.$slots,"footer")],2)):E("v-if",!0),e.resizable?(b(),A("div",{key:3,ref_key:"draggerRef",ref:d,style:$({zIndex:g(N)}),class:R(g(n).e("dragger"))},null,6)):E("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[T,g(O)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}}),[["__file","drawer.vue"]]));export{M as E};
