import{t as e,_ as l,d as a,A as t,b as r,r as s,c as o,aa as i,u as n,ak as u,e as c,f as v,w as f,$ as m,C as d,j as p,n as h,i as b,k as y,a1 as g,T as w,H as S,g as z,m as x,P as E,b2 as _,z as L,J as k,I as H,y as T,S as C,bY as B,o as R,U as j,bZ as N,h as W,l as A,D as $,ae as M,af as O,q}from"./index.CM47KQtG.js";import{t as P}from"./error.D_Dr4eZ1.js";import{u as Y}from"./index.BpEbxuRh.js";const I={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},K=Symbol("scrollbarContextKey"),X=e({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean});var D=l(a({__name:"thumb",props:X,setup(e){const l=e,a=t(K),z=r("scrollbar");a||P("Thumb","can not inject scrollbar context");const x=s(),E=s(),_=s({}),L=s(!1);let k=!1,H=!1,T=0,C=0,B=S?document.onselectstart:null;const R=o(()=>I[l.vertical?"vertical":"horizontal"]),j=o(()=>(({move:e,size:l,bar:a})=>({[a.size]:l,transform:`translate${a.axis}(${e}%)`}))({size:l.size,move:l.move,bar:R.value})),N=o(()=>x.value[R.value.offset]**2/a.wrapElement[R.value.scrollSize]/l.ratio/E.value[R.value.offset]),W=e=>{var l;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(l=window.getSelection())||l.removeAllRanges(),$(e);const a=e.currentTarget;a&&(_.value[R.value.axis]=a[R.value.offset]-(e[R.value.client]-a.getBoundingClientRect()[R.value.direction]))},A=e=>{if(!E.value||!x.value||!a.wrapElement)return;const l=100*(Math.abs(e.target.getBoundingClientRect()[R.value.direction]-e[R.value.client])-E.value[R.value.offset]/2)*N.value/x.value[R.value.offset];a.wrapElement[R.value.scroll]=l*a.wrapElement[R.value.scrollSize]/100},$=e=>{e.stopImmediatePropagation(),k=!0,T=a.wrapElement.scrollHeight,C=a.wrapElement.scrollWidth,document.addEventListener("mousemove",M),document.addEventListener("mouseup",O),B=document.onselectstart,document.onselectstart=()=>!1},M=e=>{if(!x.value||!E.value)return;if(!1===k)return;const l=_.value[R.value.axis];if(!l)return;const t=100*(-1*(x.value.getBoundingClientRect()[R.value.direction]-e[R.value.client])-(E.value[R.value.offset]-l))*N.value/x.value[R.value.offset];"scrollLeft"===R.value.scroll?a.wrapElement[R.value.scroll]=t*C/100:a.wrapElement[R.value.scroll]=t*T/100},O=()=>{k=!1,_.value[R.value.axis]=0,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",O),q(),H&&(L.value=!1)};i(()=>{q(),document.removeEventListener("mouseup",O)});const q=()=>{document.onselectstart!==B&&(document.onselectstart=B)};return n(u(a,"scrollbarElement"),"mousemove",()=>{H=!1,L.value=!!l.size}),n(u(a,"scrollbarElement"),"mouseleave",()=>{H=!0,L.value=k}),(e,l)=>(v(),c(w,{name:b(z).b("fade"),persisted:""},{default:f(()=>[m(d("div",{ref_key:"instance",ref:x,class:h([b(z).e("bar"),b(z).is(b(R).key)]),onMousedown:A,onClick:p(()=>{},["stop"])},[d("div",{ref_key:"thumb",ref:E,class:h(b(z).e("thumb")),style:y(b(j)),onMousedown:W},null,38)],42,["onClick"]),[[g,e.always||L.value]])]),_:1},8,["name"]))}}),[["__file","thumb.vue"]]);var J=l(a({__name:"bar",props:e({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),setup(e,{expose:l}){const a=e,r=t(K),o=s(0),i=s(0),n=s(""),u=s(""),c=s(1),f=s(1);return l({handleScroll:e=>{if(e){const l=e.offsetHeight-4,a=e.offsetWidth-4;i.value=100*e.scrollTop/l*c.value,o.value=100*e.scrollLeft/a*f.value}},update:()=>{const e=null==r?void 0:r.wrapElement;if(!e)return;const l=e.offsetHeight-4,t=e.offsetWidth-4,s=l**2/e.scrollHeight,o=t**2/e.scrollWidth,i=Math.max(s,a.minSize),v=Math.max(o,a.minSize);c.value=s/(l-s)/(i/(l-i)),f.value=o/(t-o)/(v/(t-v)),u.value=i+4<l?`${i}px`:"",n.value=v+4<t?`${v}px`:""}}),(e,l)=>(v(),z(E,null,[x(D,{move:o.value,ratio:f.value,size:n.value,always:e.always},null,8,["move","ratio","size","always"]),x(D,{move:i.value,ratio:c.value,size:u.value,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64))}}),[["__file","bar.vue"]]);const U=e({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:L([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...Y(["ariaLabel","ariaOrientation"])}),Z={"end-reached":e=>["left","right","top","bottom"].includes(e),scroll:({scrollTop:e,scrollLeft:l})=>[e,l].every(_)},F=a({name:"ElScrollbar"});const G=q(l(a({...F,props:U,emits:Z,setup(e,{expose:l,emit:a}){const t=e,i=r("scrollbar");let u,m,p,g=0,w=0,S="";const x={bottom:!1,top:!1,right:!1,left:!1},E=s(),L=s(),q=s(),P=s(),Y=o(()=>{const e={};return t.height&&(e.height=k(t.height)),t.maxHeight&&(e.maxHeight=k(t.maxHeight)),[t.wrapStyle,e]}),I=o(()=>[t.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!t.native}]),X=o(()=>[i.e("view"),t.viewClass]),D={top:"bottom",bottom:"top",left:"right",right:"left"},U=()=>{var e;if(L.value){null==(e=P.value)||e.handleScroll(L.value);const l=g,r=w;g=L.value.scrollTop,w=L.value.scrollLeft;const s={bottom:g+L.value.clientHeight>=L.value.scrollHeight-t.distance,top:g<=t.distance&&0!==l,right:w+L.value.clientWidth>=L.value.scrollWidth-t.distance&&r!==w,left:w<=t.distance&&0!==r};if(a("scroll",{scrollTop:g,scrollLeft:w}),l!==g&&(S=g>l?"bottom":"top"),r!==w&&(S=w>r?"right":"left"),t.distance>0){if((e=>{var l;return null!=(l=x[e])&&l})(S))return;(e=>{const l=D[S];if(!l)return;const a=e[S],t=e[l];a&&!x[S]&&(x[S]=!0),!t&&x[l]&&(x[l]=!1)})(s)}s[S]&&a("end-reached",S)}};const Z=()=>{var e;null==(e=P.value)||e.update(),x[S]=!1};return H(()=>t.noresize,e=>{e?(null==u||u(),null==m||m(),null==p||p()):(({stop:u}=O(q,Z)),({stop:m}=O(L,Z)),p=n("resize",Z))},{immediate:!0}),H(()=>[t.maxHeight,t.height],()=>{t.native||j(()=>{var e;Z(),L.value&&(null==(e=P.value)||e.handleScroll(L.value))})}),T(K,C({scrollbarElement:E,wrapElement:L})),B(()=>{L.value&&(L.value.scrollTop=g,L.value.scrollLeft=w)}),R(()=>{t.native||j(()=>{Z()})}),N(()=>Z()),l({wrapRef:L,update:Z,scrollTo:function(e,l){M(e)?L.value.scrollTo(e):_(e)&&_(l)&&L.value.scrollTo(e,l)},setScrollTop:e=>{_(e)&&(L.value.scrollTop=e)},setScrollLeft:e=>{_(e)&&(L.value.scrollLeft=e)},handleScroll:U}),(e,l)=>(v(),z("div",{ref_key:"scrollbarRef",ref:E,class:h(b(i).b())},[d("div",{ref_key:"wrapRef",ref:L,class:h(b(I)),style:y(b(Y)),tabindex:e.tabindex,onScroll:U},[(v(),c($(e.tag),{id:e.id,ref_key:"resizeRef",ref:q,class:h(b(X)),style:y(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:f(()=>[A(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),e.native?W("v-if",!0):(v(),c(J,{key:0,ref_key:"barRef",ref:P,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}}),[["__file","scrollbar.vue"]]));export{G as E,Z as s};
