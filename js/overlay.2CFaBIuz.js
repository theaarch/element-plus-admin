import{by as e,d as o,t as l,b as a,m as t,ab as s,l as n,z as r,v as d,r as u,o as i,R as c,aa as f,J as v,_ as p,x as m,A as y,c as g,g as b,f as C,C as h,h as w,n as k,i as x,F as E,w as M,e as A,D as B,c7 as I,E as S,k as L,bB as $,az as z,H as F,a6 as R,I as P,c8 as _,a5 as D,bH as T,a7 as j,B as O,c1 as Y,c9 as X,ca as q,ae as H,ad as N,bw as U,ac as V,U as Z,bz as J,T as K,Z as W,$ as G,bo as Q,a1 as ee,y as oe,q as le}from"./index.DRPoGZBk.js";import{P as ae}from"./vnode.BI5jxDcy.js";import{F as te,t as se,E as ne,a as re}from"./index.SISkM0HS.js";import{c as de}from"./refs.Cw5r5QN8.js";import{U as ue}from"./event.BwRzfsZt.js";import{t as ie}from"./error.D_Dr4eZ1.js";import{g as ce}from"./scroll.EvVlGgaK.js";import{d as fe}from"./use-form-common-props.DsMPcFL7.js";import{u as ve}from"./index.C88r2BaC.js";const pe=o=>{if(!o)return{onClick:e,onMousedown:e,onMouseup:e};let l=!1,a=!1;return{onClick:e=>{l&&a&&o(e),l=a=!1},onMousedown:e=>{l=e.target===e.currentTarget},onMouseup:e=>{a=e.target===e.currentTarget}}},me=l({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:r([String,Array,Object])},zIndex:{type:r([String,Number])}});const ye=o({name:"ElOverlay",props:me,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:l}){const r=a("overlay"),{onClick:d,onMousedown:u,onMouseup:i}=pe(e.customMaskEvent?void 0:e=>{l("click",e)});return()=>e.mask?t("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:i},[n(o,"default")],ae.STYLE|ae.CLASS|ae.PROPS,["onClick","onMouseup","onMousedown"]):s("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[n(o,"default")])}}),ge=Symbol("dialogInjectionKey"),be="dialog-fade",Ce=l({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:d},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),he=(e,o,l,a)=>{const t={offsetX:0,offsetY:0},s=u(!1),n=(o,l)=>{if(e.value){const{offsetX:s,offsetY:n}=t,r=e.value.getBoundingClientRect(),d=r.left,u=r.top,i=r.width,c=r.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,m=-d+s,y=-u+n,g=f-d-i+s,b=p-u-(c<p?c:0)+n;(null==a?void 0:a.value)||(o=Math.min(Math.max(o,m),g),l=Math.min(Math.max(l,y),b)),t.offsetX=o,t.offsetY=l,e.value.style.transform=`translate(${v(o)}, ${v(l)})`}},r=e=>{const o=e.clientX,l=e.clientY,{offsetX:a,offsetY:r}=t,d=e=>{s.value||(s.value=!0);const t=a+e.clientX-o,d=r+e.clientY-l;n(t,d)},u=()=>{s.value=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},d=()=>{o.value&&e.value&&(o.value.removeEventListener("mousedown",r),window.removeEventListener("resize",p))},p=()=>{const{offsetX:e,offsetY:o}=t;n(e,o)};return i(()=>{c(()=>{l.value?o.value&&e.value&&(o.value.addEventListener("mousedown",r),window.addEventListener("resize",p)):d()})}),f(()=>{d()}),{isDragging:s,resetPosition:()=>{t.offsetX=0,t.offsetY=0,e.value&&(e.value.style.transform="")},updatePosition:p}},we=o({name:"ElDialogContent"});var ke=p(o({...we,props:Ce,emits:{close:()=>!0},setup(e,{expose:o}){const l=e,{t:a}=m(),{Close:s}=I,{dialogRef:r,headerRef:d,bodyId:u,ns:i,style:c}=y(ge),{focusTrapRef:f}=y(te),v=de(f,r),p=g(()=>!!l.draggable),$=g(()=>!!l.overflow),{resetPosition:z,updatePosition:F,isDragging:R}=he(r,d,p,$),P=g(()=>[i.b(),i.is("fullscreen",l.fullscreen),i.is("draggable",p.value),i.is("dragging",R.value),i.is("align-center",!!l.alignCenter),{[i.m("center")]:l.center}]);return o({resetPosition:z,updatePosition:F}),(e,o)=>(C(),b("div",{ref:x(v),class:k(x(P)),style:L(x(c)),tabindex:"-1"},[h("header",{ref_key:"headerRef",ref:d,class:k([x(i).e("header"),e.headerClass,{"show-close":e.showClose}])},[n(e.$slots,"header",{},()=>[h("span",{role:"heading","aria-level":e.ariaLevel,class:k(x(i).e("title"))},E(e.title),11,["aria-level"])]),e.showClose?(C(),b("button",{key:0,"aria-label":x(a)("el.dialog.close"),class:k(x(i).e("headerbtn")),type:"button",onClick:o=>e.$emit("close")},[t(x(S),{class:k(x(i).e("close"))},{default:M(()=>[(C(),A(B(e.closeIcon||x(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):w("v-if",!0)],2),h("div",{id:x(u),class:k([x(i).e("body"),e.bodyClass])},[n(e.$slots,"default")],10,["id"]),e.$slots.footer?(C(),b("footer",{key:0,class:k([x(i).e("footer"),e.footerClass])},[n(e.$slots,"footer")],2)):w("v-if",!0)],6))}}),[["__file","dialog-content.vue"]]);const xe=l({...Ce,appendToBody:Boolean,appendTo:{type:se.to.type,default:"body"},beforeClose:{type:r(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:r([String,Object]),default:void 0}}),Ee={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ue]:e=>$(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Me=(e,o={})=>{z(e)||ie("[useLockscreen]","You need to pass a ref param to this function");const l=o.ns||a("popup"),t=g(()=>l.bm("parent","hidden"));if(!F||R(document.body,t.value))return;let s=0,n=!1,r="0";const d=()=>{setTimeout(()=>{"undefined"!=typeof document&&n&&document&&(document.body.style.width=r,j(document.body,t.value))},200)};P(e,e=>{if(!e)return void d();n=!R(document.body,t.value),n&&(r=document.body.style.width,D(document.body,t.value)),s=ce(l.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,a=T(document.body,"overflowY");s>0&&(o||"scroll"===a)&&n&&(document.body.style.width=`calc(100% - ${s}px)`)}),_(()=>d())},Ae=(e,o)=>{var l;const a=O().emit,{nextZIndex:t}=Y();let s="";const n=fe(),r=fe(),d=u(!1),c=u(!1),f=u(!1),p=u(null!=(l=e.zIndex)?l:t());let m,y;const b=X(),C=g(()=>{var e,o;return null!=(o=null==(e=b.value)?void 0:e.namespace)?o:q}),h=g(()=>{var e;return null==(e=b.value)?void 0:e.dialog}),w=g(()=>{const o={},l=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(o[`${l}-margin-top`]=e.top),e.width&&(o[`${l}-width`]=v(e.width))),o}),k=g(()=>{var o,l,a;return null!=(a=null!=(l=e.draggable)?l:null==(o=h.value)?void 0:o.draggable)&&a&&!e.fullscreen}),x=g(()=>{var o,l,a;return null!=(a=null!=(l=e.alignCenter)?l:null==(o=h.value)?void 0:o.alignCenter)&&a}),E=g(()=>{var o,l,a;return null!=(a=null!=(l=e.overflow)?l:null==(o=h.value)?void 0:o.overflow)&&a}),M=g(()=>x.value?{display:"flex"}:{}),A=g(()=>{var o,l,a;const t=null!=(a=null!=(l=e.transition)?l:null==(o=h.value)?void 0:o.transition)?a:be,s={name:t,onAfterEnter:B,onBeforeLeave:S,onAfterLeave:I};if(H(t)){const e={...t},o=(e,o)=>l=>{N(e)?e.forEach(e=>{U(e)&&e(l)}):U(e)&&e(l),o()};return e.onAfterEnter=o(e.onAfterEnter,B),e.onBeforeLeave=o(e.onBeforeLeave,S),e.onAfterLeave=o(e.onAfterLeave,I),e.name||(e.name=be),e}return s});function B(){a("opened")}function I(){a("closed"),a(ue,!1),e.destroyOnClose&&(f.value=!1)}function S(){a("close")}function L(){null==y||y(),null==m||m(),e.openDelay&&e.openDelay>0?({stop:m}=V(()=>R(),e.openDelay)):R()}function $(){null==m||m(),null==y||y(),e.closeDelay&&e.closeDelay>0?({stop:y}=V(()=>_(),e.closeDelay)):_()}function z(){e.beforeClose?e.beforeClose(function(e){e||(c.value=!0,d.value=!1)}):$()}function R(){F&&(d.value=!0)}function _(){d.value=!1}return e.lockScroll&&Me(d),P(()=>e.zIndex,()=>{var o;p.value=null!=(o=e.zIndex)?o:t()}),P(()=>e.modelValue,l=>{var s;l?(c.value=!1,L(),f.value=!0,p.value=null!=(s=e.zIndex)?s:t(),Z(()=>{a("open"),o.value&&(o.value.parentElement.scrollTop=0,o.value.parentElement.scrollLeft=0,o.value.scrollTop=0)})):d.value&&$()}),P(()=>e.fullscreen,e=>{o.value&&(e?(s=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=s)}),i(()=>{e.modelValue&&(d.value=!0,f.value=!0,L())}),{afterEnter:B,afterLeave:I,beforeLeave:S,handleClose:z,onModalClick:function(){e.closeOnClickModal&&z()},close:$,doClose:_,onOpenAutoFocus:function(){a("openAutoFocus")},onCloseAutoFocus:function(){a("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&z()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:n,bodyId:r,closed:c,style:w,overlayDialogStyle:M,rendered:f,visible:d,zIndex:p,transitionConfig:A,_draggable:k,_alignCenter:x,_overflow:E}},Be=o({name:"ElDialog",inheritAttrs:!1});const Ie=le(p(o({...Be,props:xe,emits:Ee,setup(e,{expose:o}){const l=e,s=J();ve({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},g(()=>!!s.title));const r=a("dialog"),d=u(),i=u(),c=u(),{visible:f,titleId:v,bodyId:p,style:m,overlayDialogStyle:y,rendered:b,transitionConfig:E,zIndex:B,_draggable:I,_alignCenter:S,_overflow:$,handleClose:z,onModalClick:F,onOpenAutoFocus:R,onCloseAutoFocus:P,onCloseRequested:_,onFocusoutPrevented:D}=Ae(l,d);oe(ge,{dialogRef:d,headerRef:i,bodyId:p,ns:r,rendered:b,style:m});const T=pe(F),j=g(()=>l.modalPenetrable&&!l.modal&&!l.fullscreen);return o({visible:f,dialogContentRef:c,resetPosition:()=>{var e;null==(e=c.value)||e.resetPosition()},handleClose:z}),(e,o)=>(C(),A(x(re),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:M(()=>[t(K,W(x(E),{persisted:""}),{default:M(()=>{var o;return[G(t(x(ye),{"custom-mask-event":"",mask:e.modal,"overlay-class":[null!=(o=e.modalClass)?o:"",`${x(r).namespace.value}-modal-dialog`,x(r).is("penetrable",x(j))],"z-index":x(B)},{default:M(()=>[h("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:x(v),"aria-describedby":x(p),class:k(`${x(r).namespace.value}-overlay-dialog`),style:L(x(y)),onClick:x(T).onClick,onMousedown:x(T).onMousedown,onMouseup:x(T).onMouseup},[t(x(ne),{loop:"",trapped:x(f),"focus-start-el":"container",onFocusAfterTrapped:x(R),onFocusAfterReleased:x(P),onFocusoutPrevented:x(D),onReleaseRequested:x(_)},{default:M(()=>[x(b)?(C(),A(ke,W({key:0,ref_key:"dialogContentRef",ref:c},e.$attrs,{center:e.center,"align-center":x(S),"close-icon":e.closeIcon,draggable:x(I),overflow:x($),fullscreen:e.fullscreen,"header-class":e.headerClass,"body-class":e.bodyClass,"footer-class":e.footerClass,"show-close":e.showClose,title:e.title,"aria-level":e.headerAriaLevel,onClose:x(z)}),Q({header:M(()=>[e.$slots.title?n(e.$slots,"title",{key:1}):n(e.$slots,"header",{key:0,close:x(z),titleId:x(v),titleClass:x(r).e("title")})]),default:M(()=>[n(e.$slots,"default")]),_:2},[e.$slots.footer?{name:"footer",fn:M(()=>[n(e.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):w("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[ee,x(f)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}}),[["__file","dialog.vue"]]));export{Ie as E,xe as a,ye as b,he as c,Ee as d,Me as e,pe as f,Ae as u};
