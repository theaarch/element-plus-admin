import{t as e,_ as l,d as a,A as t,b as s,r,c as o,aa as i,u as n,aj as u,e as c,f as v,w as f,$ as m,C as d,j as p,n as h,i as b,k as y,a1 as g,T as w,H as S,g as z,m as x,P as E,a$ as _,z as L,J as H,I as T,y as k,S as C,bX as j,o as B,U as R,bY as N,h as W,l as $,D as A,ae as M,af as O,q}from"./index.DRPoGZBk.js";import{t as P}from"./error.D_Dr4eZ1.js";import{u as X}from"./index.F5OfedVa.js";const Y={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},I=Symbol("scrollbarContextKey"),K=e({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean});var D=l(a({__name:"thumb",props:K,setup(e){const l=e,a=t(I),z=s("scrollbar");a||P("Thumb","can not inject scrollbar context");const x=r(),E=r(),_=r({}),L=r(!1);let H=!1,T=!1,k=0,C=0,j=S?document.onselectstart:null;const B=o(()=>Y[l.vertical?"vertical":"horizontal"]),R=o(()=>(({move:e,size:l,bar:a})=>({[a.size]:l,transform:`translate${a.axis}(${e}%)`}))({size:l.size,move:l.move,bar:B.value})),N=o(()=>x.value[B.value.offset]**2/a.wrapElement[B.value.scrollSize]/l.ratio/E.value[B.value.offset]),W=e=>{var l;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(l=window.getSelection())||l.removeAllRanges(),A(e);const a=e.currentTarget;a&&(_.value[B.value.axis]=a[B.value.offset]-(e[B.value.client]-a.getBoundingClientRect()[B.value.direction]))},$=e=>{if(!E.value||!x.value||!a.wrapElement)return;const l=100*(Math.abs(e.target.getBoundingClientRect()[B.value.direction]-e[B.value.client])-E.value[B.value.offset]/2)*N.value/x.value[B.value.offset];a.wrapElement[B.value.scroll]=l*a.wrapElement[B.value.scrollSize]/100},A=e=>{e.stopImmediatePropagation(),H=!0,k=a.wrapElement.scrollHeight,C=a.wrapElement.scrollWidth,document.addEventListener("mousemove",M),document.addEventListener("mouseup",O),j=document.onselectstart,document.onselectstart=()=>!1},M=e=>{if(!x.value||!E.value)return;if(!1===H)return;const l=_.value[B.value.axis];if(!l)return;const t=100*(-1*(x.value.getBoundingClientRect()[B.value.direction]-e[B.value.client])-(E.value[B.value.offset]-l))*N.value/x.value[B.value.offset];"scrollLeft"===B.value.scroll?a.wrapElement[B.value.scroll]=t*C/100:a.wrapElement[B.value.scroll]=t*k/100},O=()=>{H=!1,_.value[B.value.axis]=0,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",O),q(),T&&(L.value=!1)};i(()=>{q(),document.removeEventListener("mouseup",O)});const q=()=>{document.onselectstart!==j&&(document.onselectstart=j)};return n(u(a,"scrollbarElement"),"mousemove",()=>{T=!1,L.value=!!l.size}),n(u(a,"scrollbarElement"),"mouseleave",()=>{T=!0,L.value=H}),(e,l)=>(v(),c(w,{name:b(z).b("fade"),persisted:""},{default:f(()=>[m(d("div",{ref_key:"instance",ref:x,class:h([b(z).e("bar"),b(z).is(b(B).key)]),onMousedown:$,onClick:p(()=>{},["stop"])},[d("div",{ref_key:"thumb",ref:E,class:h(b(z).e("thumb")),style:y(b(R)),onMousedown:W},null,38)],42,["onClick"]),[[g,e.always||L.value]])]),_:1},8,["name"]))}}),[["__file","thumb.vue"]]);var J=l(a({__name:"bar",props:e({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),setup(e,{expose:l}){const a=e,s=t(I),o=r(0),i=r(0),n=r(""),u=r(""),c=r(1),f=r(1);return l({handleScroll:e=>{if(e){const l=e.offsetHeight-4,a=e.offsetWidth-4;i.value=100*e.scrollTop/l*c.value,o.value=100*e.scrollLeft/a*f.value}},update:()=>{const e=null==s?void 0:s.wrapElement;if(!e)return;const l=e.offsetHeight-4,t=e.offsetWidth-4,r=l**2/e.scrollHeight,o=t**2/e.scrollWidth,i=Math.max(r,a.minSize),v=Math.max(o,a.minSize);c.value=r/(l-r)/(i/(l-i)),f.value=o/(t-o)/(v/(t-v)),u.value=i+4<l?`${i}px`:"",n.value=v+4<t?`${v}px`:""}}),(e,l)=>(v(),z(E,null,[x(D,{move:o.value,ratio:f.value,size:n.value,always:e.always},null,8,["move","ratio","size","always"]),x(D,{move:i.value,ratio:c.value,size:u.value,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64))}}),[["__file","bar.vue"]]);const U=e({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:L([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...X(["ariaLabel","ariaOrientation"])}),F={"end-reached":e=>["left","right","top","bottom"].includes(e),scroll:({scrollTop:e,scrollLeft:l})=>[e,l].every(_)},G=a({name:"ElScrollbar"});const Q=q(l(a({...G,props:U,emits:F,setup(e,{expose:l,emit:a}){const t=e,i=s("scrollbar");let u,m,p,g=0,w=0,S="";const x={bottom:!1,top:!1,right:!1,left:!1},E=r(),L=r(),q=r(),P=r(),X=o(()=>{const e={};return t.height&&(e.height=H(t.height)),t.maxHeight&&(e.maxHeight=H(t.maxHeight)),[t.wrapStyle,e]}),Y=o(()=>[t.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!t.native}]),K=o(()=>[i.e("view"),t.viewClass]),D={top:"bottom",bottom:"top",left:"right",right:"left"},U=()=>{var e;if(L.value){null==(e=P.value)||e.handleScroll(L.value);const l=g,s=w;g=L.value.scrollTop,w=L.value.scrollLeft;const r={bottom:g+L.value.clientHeight>=L.value.scrollHeight-t.distance,top:g<=t.distance&&0!==l,right:w+L.value.clientWidth>=L.value.scrollWidth-t.distance&&s!==w,left:w<=t.distance&&0!==s};if(a("scroll",{scrollTop:g,scrollLeft:w}),l!==g&&(S=g>l?"bottom":"top"),s!==w&&(S=w>s?"right":"left"),t.distance>0){if((e=>{var l;return null!=(l=x[e])&&l})(S))return;(e=>{const l=D[S];if(!l)return;const a=e[S],t=e[l];a&&!x[S]&&(x[S]=!0),!t&&x[l]&&(x[l]=!1)})(r)}r[S]&&a("end-reached",S)}};const F=()=>{var e;null==(e=P.value)||e.update(),x[S]=!1};return T(()=>t.noresize,e=>{e?(null==u||u(),null==m||m(),null==p||p()):(({stop:u}=O(q,F)),({stop:m}=O(L,F)),p=n("resize",F))},{immediate:!0}),T(()=>[t.maxHeight,t.height],()=>{t.native||R(()=>{var e;F(),L.value&&(null==(e=P.value)||e.handleScroll(L.value))})}),k(I,C({scrollbarElement:E,wrapElement:L})),j(()=>{L.value&&(L.value.scrollTop=g,L.value.scrollLeft=w)}),B(()=>{t.native||R(()=>{F()})}),N(()=>F()),l({wrapRef:L,update:F,scrollTo:function(e,l){M(e)?L.value.scrollTo(e):_(e)&&_(l)&&L.value.scrollTo(e,l)},setScrollTop:e=>{_(e)&&(L.value.scrollTop=e)},setScrollLeft:e=>{_(e)&&(L.value.scrollLeft=e)},handleScroll:U}),(e,l)=>(v(),z("div",{ref_key:"scrollbarRef",ref:E,class:h(b(i).b())},[d("div",{ref_key:"wrapRef",ref:L,class:h(b(Y)),style:y(b(X)),tabindex:e.tabindex,onScroll:U},[(v(),c(A(e.tag),{id:e.id,ref_key:"resizeRef",ref:q,class:h(b(K)),style:y(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:f(()=>[$(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),e.native?W("v-if",!0):(v(),c(J,{key:0,ref_key:"barRef",ref:P,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}}),[["__file","scrollbar.vue"]]));export{Q as E,F as s};
