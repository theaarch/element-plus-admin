import{ct as e,cp as a,cq as t,di as l,cb as s,t as n,ai as o,z as r,_ as i,d as u,A as d,b as v,r as c,I as b,af as p,aa as f,g as m,f as h,k as g,n as y,i as x,a9 as C,U as w,dC as E,dD as R,s as $,c as P,dE as N,o as k,bW as T,dr as S,m as B,E as j,cF as A,a8 as F,K as _,L,a2 as z,M as V,b2 as W,l as K,du as M,B as O,y as q,bz as I,c2 as U,S as D,bA as X,$ as Y,h as G,a1 as H,q as Q,G as J}from"./index.DA1-yP8b.js";import{i as Z,c as ee,r as ae}from"./raf.DYsdbbTI.js";import{c as te}from"./strings.qP75ScVX.js";import{t as le}from"./error.D_Dr4eZ1.js";import{t as se}from"./toNumber.BxnglGf2.js";import{U as ne}from"./event.BwRzfsZt.js";import{u as oe}from"./index.sOZHelYx.js";import{g as re,b as ie}from"./_baseClone.dUi7U9-C.js";import{c as ue}from"./_initCloneObject.DY8G7Bvh.js";import{a as de}from"./index.Bp-WbYJa.js";function ve(a,t){return t.length<2?a:e(a,function(e,a,t){var l=-1,s=e.length;a<0&&(a=-a>s?0:s+a),(t=t>s?s:t)<0&&(t+=s),s=a>t?0:t-a>>>0,a>>>=0;for(var n=Array(s);++l<s;)n[l]=e[l+a];return n}(t,0,-1))}function ce(e,l){return null==(e=ve(e,l=a(l,e)))||delete e[t((s=l,n=null==s?0:s.length,n?s[n-1]:void 0))];var s,n}function be(e){return Z(e)?void 0:e}var pe=de(function(e,t){var s={};if(null==e)return s;var n=!1;t=l(t,function(t){return t=a(t,e),n||(n=t.length>1),t}),ue(e,re(e),s),n&&(s=ie(s,7,be));for(var o=t.length;o--;)ce(s,t[o]);return s});const fe="horizontal",me="vertical",he={[fe]:"deltaX",[me]:"deltaY"},ge=Symbol("tabsRootContextKey"),ye=n({tabs:{type:r(Array),default:()=>o([])},tabRefs:{type:r(Object),default:()=>o({})}}),xe="ElTabBar",Ce=u({name:xe});var we=i(u({...Ce,props:ye,setup(e,{expose:a}){const t=e,l=d(ge);l||le(xe,"<el-tabs><el-tab-bar /></el-tabs>");const s=v("tabs"),n=c(),o=c(),r=()=>o.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(C(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${te(o)}`],a=n[`client${te(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${te(n)}(${e}px)`}})(),i=[];b(()=>t.tabs,async()=>{await w(),r(),i.forEach(e=>e.stop()),i.length=0,Object.values(t.tabRefs).forEach(e=>{i.push(p(e,r))})},{immediate:!0});const u=p(n,()=>r());return f(()=>{i.forEach(e=>e.stop()),i.length=0,u.stop()}),a({ref:n,update:r}),(e,a)=>(h(),m("div",{ref_key:"barRef",ref:n,class:y([x(s).e("active-bar"),x(s).is(x(l).props.tabPosition)]),style:g(o.value)},null,6))}}),[["__file","tab-bar.vue"]]);const Ee=n({panes:{type:r(Array),default:()=>o([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Re="ElTabNav",$e=u({name:Re,props:Ee,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=d(ge);l||le(Re,"<el-tabs><tab-nav /></el-tabs>");const n=v("tabs"),o=E(),r=R(),i=c(),u=c(),f=c(),m=c({}),h=c(),g=c(!1),y=c(0),x=c(!1),C=c(!0),V=$(),W=P(()=>["top","bottom"].includes(l.props.tabPosition)),K=P(()=>W.value?"width":"height"),M=P(()=>({transform:`translate${"width"===K.value?"X":"Y"}(-${y.value}px)`})),{width:O,height:q}=N(i),{width:I,height:U}=N(u,{width:0,height:0},{box:"border-box"}),D=P(()=>W.value?O.value:q.value),X=P(()=>W.value?I.value:U.value),{onWheel:Y}=(({atEndEdge:e,atStartEdge:a,layout:t},l)=>{let n,o=0;const r=t=>t<0&&a.value||t>0&&e.value;return{hasReachedEdge:r,onWheel:e=>{ee(n);const a=e[he[t.value]];r(o)&&r(o+a)||(o+=a,s()||e.preventDefault(),n=ae(()=>{l(o),o=0}))}}})({atStartEdge:P(()=>y.value<=0),atEndEdge:P(()=>X.value-y.value<=D.value),layout:P(()=>W.value?"horizontal":"vertical")},e=>{var a,t,l;y.value=(a=y.value+e,t=0,void 0===(l=X.value-D.value)&&(l=t,t=void 0),void 0!==l&&(l=(l=se(l))==l?l:0),void 0!==t&&(t=(t=se(t))==t?t:0),function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(se(a),t,l))}),G=()=>{if(!i.value)return;const e=i.value[`offset${te(K.value)}`],a=y.value;if(!a)return;const t=a>e?a-e:0;y.value=t},H=()=>{if(!i.value||!u.value)return;const e=u.value[`offset${te(K.value)}`],a=i.value[`offset${te(K.value)}`],t=y.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;y.value=l},Q=async()=>{const a=u.value;if(!(g.value&&f.value&&i.value&&a))return;await w();const t=m.value[e.currentName];if(!t)return;const l=i.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=W.value?a.offsetWidth-n.width:a.offsetHeight-n.height,r=y.value;let d=r;W.value?(s.left<n.left&&(d=r-(n.left-s.left)),s.right>n.right&&(d=r+s.right-n.right)):(s.top<n.top&&(d=r-(n.top-s.top)),s.bottom>n.bottom&&(d=r+(s.bottom-n.bottom))),d=Math.max(d,0),y.value=Math.min(d,o)},J=()=>{var a;if(!u.value||!i.value)return;e.stretch&&(null==(a=h.value)||a.update());const t=u.value[`offset${te(K.value)}`],l=i.value[`offset${te(K.value)}`],s=y.value;l<t?(g.value=g.value||{},g.value.prev=s,g.value.next=s+l<t,t-s<l&&(y.value=t-l)):(g.value=!1,s>0&&(y.value=0))},Z=e=>{let a=0;switch(_(e)){case L.left:case L.up:a=-1;break;case L.right:case L.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),ne()},ne=()=>{C.value&&(x.value=!0)},oe=()=>x.value=!1;return b(o,e=>{"hidden"===e?C.value=!1:"visible"===e&&setTimeout(()=>C.value=!0,50)}),b(r,e=>{e?setTimeout(()=>C.value=!0,50):C.value=!1}),p(f,J),k(()=>setTimeout(()=>Q(),0)),T(()=>J()),a({scrollToActiveTab:Q,removeFocus:oe,focusActiveTab:async()=>{await w();const a=m.value[e.currentName];null==a||a.focus({preventScroll:!0})},tabListRef:u,tabBarRef:h,scheduleRender:()=>S(V)}),()=>{const a=g.value?[B("span",{class:[n.e("nav-prev"),n.is("disabled",!g.value.prev)],onClick:G},[B(j,null,{default:()=>[B(A,null,null)]})]),B("span",{class:[n.e("nav-next"),n.is("disabled",!g.value.next)],onClick:H},[B(j,null,{default:()=>[B(F,null,null)]})])]:null,s=e.panes.map((a,s)=>{var o,r,i,u;const d=a.uid,v=a.props.disabled,c=null!=(r=null!=(o=a.props.name)?o:a.index)?r:`${s}`,b=!v&&(a.isClosable||!1!==a.props.closable&&e.editable);a.index=`${s}`;const p=b?B(j,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[B(z,null,null)]}):null,f=(null==(u=(i=a.slots).label)?void 0:u.call(i))||a.props.label,h=!v&&a.active?0:-1;return B("div",{ref:e=>((e,a)=>{m.value[a]=e})(e,c),class:[n.e("item"),n.is(l.props.tabPosition),n.is("active",a.active),n.is("disabled",v),n.is("closable",b),n.is("focus",x.value)],id:`tab-${c}`,key:`tab-${d}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":a.active,tabindex:h,onFocus:()=>ne(),onBlur:()=>oe(),onClick:e=>{oe(),t("tabClick",a,c,e)},onKeydown:e=>{const l=_(e);!b||l!==L.delete&&l!==L.backspace||t("tabRemove",a,e)}},[f,p])});return V.value,B("div",{ref:f,class:[n.e("nav-wrap"),n.is("scrollable",!!g.value),n.is(l.props.tabPosition)]},[a,B("div",{class:n.e("nav-scroll"),ref:i},[e.panes.length>0?B("div",{class:[n.e("nav"),n.is(l.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:u,style:M.value,role:"tablist",onKeydown:Z,onWheel:Y},[e.type?null:B(we,{ref:h,tabs:[...e.panes],tabRefs:m.value},null),s]):null])])}}}),Pe=n({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:r(Function),default:()=>!0},stretch:Boolean}),Ne=e=>V(e)||W(e);var ke=u({name:"ElTabs",props:Pe,emits:{[ne]:e=>Ne(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>Ne(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>Ne(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=v("tabs"),o=P(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:i,removeChild:u,ChildrenSorter:d}=oe(O(),"ElTabPane"),p=c(),f=c(null!=(s=e.modelValue)?s:"0"),m=async(t,l=!1)=>{var s,n,o,i;if(f.value!==t&&!C(t))try{let u;if(e.beforeLeave){const a=e.beforeLeave(t,f.value);u=a instanceof Promise?await a:a}else u=!0;if(!1!==u){const e=null==(s=r.value.find(e=>e.paneName===f.value))?void 0:s.isFocusInsidePane();f.value=t,l&&(a(ne,t),a("tabChange",t)),null==(o=null==(n=p.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(i=p.value)||i.focusActiveTab())}}catch(u){}},h=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),m(t,!0))},g=(e,t)=>{e.props.disabled||C(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},y=()=>{a("edit",void 0,"add"),a("tabAdd")},x=e=>{const a=_(e);[L.enter,L.numpadEnter].includes(a)&&y()},E=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return b(()=>e.modelValue,e=>m(e)),b(f,async()=>{var e;await w(),null==(e=p.value)||e.scrollToActiveTab()}),q(ge,{props:e,currentName:f,registerPane:i,unregisterPane:u,nav$:p}),l({currentName:f,get tabNavRef(){return pe(p.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?B("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:y,onKeydown:x},[a?K(t,"add-icon"):B(j,{class:n.is("icon-plus")},{default:()=>[B(M,null,null)]})]):null,s=B("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[B(d,null,{default:()=>B($e,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:h,onTabRemove:g},null),$stable:!0}),l]),i=B("div",{class:n.e("content")},[K(t,"default")]);return B("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:E,onVnodeUpdated:E},[i,s])}}});const Te=n({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Se="ElTabPane",Be=u({name:Se});var je=i(u({...Be,props:Te,setup(e){const a=e,t=O(),l=I(),s=d(ge);s||le(Se,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=v("tab-pane"),o=c(),r=c(),i=P(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),u=U(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:r.value)}),p=c(u.value),g=P(()=>{var e;return null!=(e=a.name)?e:r.value}),C=U(()=>!a.lazy||p.value||u.value);b(u,e=>{e&&(p.value=!0)});const w=D({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:g,active:u,index:r,isClosable:i,isFocusInsidePane:()=>{var e;return null==(e=o.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(w),f(()=>{s.unregisterPane(w)}),X(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>x(C)?Y((h(),m("div",{key:0,id:`pane-${x(g)}`,ref_key:"paneRef",ref:o,class:y(x(n).b()),role:"tabpanel","aria-hidden":!x(u),"aria-labelledby":`tab-${x(g)}`},[K(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[H,x(u)]]):G("v-if",!0)}}),[["__file","tab-pane.vue"]]);const Ae=Q(ke,{TabPane:je}),Fe=J(je);export{Fe as E,Ae as a};
