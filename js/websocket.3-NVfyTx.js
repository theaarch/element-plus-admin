import{d as e,b8 as a,r as s,I as t,o as l,aa as n,g as o,f as r,m as u,w as d,a4 as i,az as p,i as m,e as c,C as f,P as _,Q as v,n as y,F as b}from"./index.DRPoGZBk.js";import{a as j,E as h}from"./form-item.BX728IAv.js";import{E as g}from"./card.QxKCHOda.js";import{a as x,E as k}from"./col.7XykCHxG.js";/* empty css            *//* empty css               */import{E as V}from"./input.CQ-26BBh.js";import{E as I}from"./link.CM2ZuMlr.js";import{u as w}from"./useStomp.CRsxkQ9Y.js";import{E as C}from"./index.CATG-Bau.js";import{E}from"./index.CjQJJCUT.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./use-form-common-props.DsMPcFL7.js";import"./castArray.DubCdOyv.js";import"./error.D_Dr4eZ1.js";import"./_baseClone.CEh0Izpu.js";import"./_initCloneObject.CljjGAhF.js";import"./typescript.CRqm1_SZ.js";import"./index.F5OfedVa.js";import"./event.BwRzfsZt.js";import"./index.CQZWqeco.js";import"./index.cDg2wPYz.js";import"./aria.Cpd_B0tV.js";import"./index.C88r2BaC.js";const U={class:"app-container"},J={class:"chat-messages-wrapper"},N={key:0,class:"chat-message__content"},O={class:"text-gray-600"},W={key:1},q=S(e({__name:"websocket",setup(e){const S=a(),q=s(void 0),z=s([]),A=s("亲爱的朋友们，系统已恢复最新状态。"),D=s("Hi, "+S.userInfo.username+" 这里是点对点消息示例！"),F=s("root"),{isConnected:H,connect:K,subscribe:P,disconnect:Q}=w({debug:!0});function R(){K()}function T(){Q()}function Y(){H.value&&(P("/app/broadcast",()=>{}),z.value.push({sender:S.userInfo.username,content:A.value}))}function $(){H.value&&(P(`/app/sendToUser/${F.value}`,()=>{}),z.value.push({sender:S.userInfo.username,content:D.value}))}return t(()=>H.value,e=>{e?(P("/topic/notice",e=>{z.value.push({sender:"Server",content:e.body})}),P("/user/queue/greeting",e=>{const a=JSON.parse(e.body);z.value.push({sender:a.sender,content:a.content})}),z.value.push({sender:"Server",content:"Websocket 已连接",type:"tip"})):z.value.push({sender:"Server",content:"Websocket 已断开",type:"tip"})}),l(()=>{R()}),n(()=>{T()}),(e,a)=>{const s=I,t=V,l=C,n=x,w=E,K=k,P=g,Q=h,B=j;return r(),o("div",U,[u(s,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/websocket.vue",type:"primary",target:"_blank",class:"mb-[20px]"},{default:d(()=>[...a[4]||(a[4]=[i(" 示例源码 请点击>>>> ",-1)])]),_:1}),u(K,{gutter:10},{default:d(()=>[u(n,{span:12},{default:d(()=>[u(P,null,{default:d(()=>[u(K,null,{default:d(()=>[u(n,{span:18},{default:d(()=>[u(t,{modelValue:m(q),"onUpdate:modelValue":a[0]||(a[0]=e=>p(q)?q.value=e:null),style:{width:"200px"}},null,8,["modelValue"]),u(l,{type:"primary",class:"ml-5",disabled:m(H),onClick:R},{default:d(()=>[...a[5]||(a[5]=[i(" 连接 ",-1)])]),_:1},8,["disabled"]),u(l,{type:"danger",disabled:!m(H),onClick:T},{default:d(()=>[...a[6]||(a[6]=[i(" 断开 ",-1)])]),_:1},8,["disabled"])]),_:1}),u(n,{span:6,class:"text-right"},{default:d(()=>[a[9]||(a[9]=i(" 连接状态： ",-1)),m(H)?(r(),c(w,{key:0,type:"success"},{default:d(()=>[...a[7]||(a[7]=[i("已连接",-1)])]),_:1})):(r(),c(w,{key:1,type:"info"},{default:d(()=>[...a[8]||(a[8]=[i("已断开",-1)])]),_:1}))]),_:1})]),_:1})]),_:1}),u(P,{class:"mt-5"},{default:d(()=>[u(B,{"label-width":"90px"},{default:d(()=>[u(Q,{label:"消息内容"},{default:d(()=>[u(t,{modelValue:m(A),"onUpdate:modelValue":a[1]||(a[1]=e=>p(A)?A.value=e:null),type:"textarea"},null,8,["modelValue"])]),_:1}),u(Q,null,{default:d(()=>[u(l,{type:"primary",onClick:Y},{default:d(()=>[...a[10]||(a[10]=[i("发送广播",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),u(P,{class:"mt-5"},{default:d(()=>[u(B,{"label-width":"90px"},{default:d(()=>[u(Q,{label:"消息内容"},{default:d(()=>[u(t,{modelValue:m(D),"onUpdate:modelValue":a[2]||(a[2]=e=>p(D)?D.value=e:null),type:"textarea"},null,8,["modelValue"])]),_:1}),u(Q,{label:"消息接收人"},{default:d(()=>[u(t,{modelValue:m(F),"onUpdate:modelValue":a[3]||(a[3]=e=>p(F)?F.value=e:null)},null,8,["modelValue"])]),_:1}),u(Q,null,{default:d(()=>[u(l,{type:"primary",onClick:$},{default:d(()=>[...a[11]||(a[11]=[i("发送点对点消息",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),u(n,{span:12},{default:d(()=>[u(P,null,{default:d(()=>[f("div",J,[(r(!0),o(_,null,v(m(z),(e,a)=>(r(),o("div",{key:a,class:y(["tip"===e.type?"system-notice":"chat-message",{"chat-message--sent":e.sender===m(S).userInfo.username,"chat-message--received":e.sender!==m(S).userInfo.username}])},["tip"!=e.type?(r(),o("div",N,[f("div",{class:y({"chat-message__sender":e.sender===m(S).userInfo.username,"chat-message__receiver":e.sender!==m(S).userInfo.username})},b(e.sender),3),f("div",O,b(e.content),1)])):(r(),o("div",W,b(e.content),1))],2))),128))])]),_:1})]),_:1})]),_:1})])}}}),[["__scopeId","data-v-0c87c754"]]);export{q as default};
