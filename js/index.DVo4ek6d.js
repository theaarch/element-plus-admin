import{d as e,r as a,S as o,o as t,g as r,f as i,C as s,m as p,w as l,a3 as m,i as n,a4 as d,$ as u,e as c,h as j,aA as f}from"./index.GflTJs6G.js";import{v as h}from"./loading.Cny4ce7G.js";import{E as b}from"./card.imxEcZ7E.js";import{_ as g}from"./index.DVsfGp34.js";import{a as w,E as _}from"./table-column.oFxEge6V.js";import"./checkbox.C_sXG_4j.js";/* empty css                */import"./popper.M0nPEVDb.js";import"./scrollbar.B07GnJRm.js";/* empty css            */import{E as x,a as v}from"./form-item.BcG9oue7.js";/* empty css               */import{E as y}from"./date-picker-panel.CM9h0rJV.js";import{E as k}from"./input.CJYOLfEJ.js";import{L as T}from"./log-api.r3e-MLue.js";import{E as V}from"./index.Cee9S6Ap.js";import"./pagination.CQHOCgKM.js";import"./select.1bGJm8Rv.js";import"./index.BWHNAV5w.js";import"./use-form-common-props.CN6mxWHu.js";import"./token.DWNpOE8r.js";import"./strings.BvCqCqUu.js";import"./error.D_Dr4eZ1.js";import"./castArray.DwxbrAOz.js";import"./index.B5FcZvAa.js";import"./aria.Cpd_B0tV.js";import"./event.BwRzfsZt.js";import"./scroll.CVVWC5eE.js";import"./debounce.CKTnWIxl.js";import"./toNumber.C2rVartd.js";import"./_baseIteratee.DKxDLuZc.js";import"./index.Bl5Su2VU.js";import"./index.CyVdTW62.js";import"./vnode.Ck2-D0cm.js";import"./index.DEqtPu-E.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./_initCloneObject.DmWSagwK.js";import"./raf.C5WpK6v9.js";import"./index.CN7INW5y.js";import"./index.loXQvNGj.js";import"./_baseClone.pRkOBEly.js";import"./dayjs.min.DfMCoYXJ.js";import"./index.DCcwHFSP.js";import"./index.B2P91kEl.js";const N={class:"app-container"},E={class:"search-container"},U=e({name:"Log",inheritAttrs:!1,__name:"index",setup(e){const U=a(),Y=a(!1),C=a(0),S=o({pageNum:1,pageSize:10,keywords:"",createTime:["",""]}),z=a();function A(){Y.value=!0,T.getPage(S).then(e=>{const a=e.data;z.value=a.list,C.value=a.total}).finally(()=>{Y.value=!1})}function P(){S.pageNum=1,A()}function I(){U.value.resetFields(),S.pageNum=1,S.createTime=void 0,A()}return t(()=>{P()}),(e,a)=>{const o=k,t=x,T=y,q=V,D=v,F=_,L=w,M=g,O=b,R=h;return i(),r("div",N,[s("div",E,[p(D,{ref_key:"queryFormRef",ref:U,model:n(S),inline:!0},{default:l(()=>[p(t,{prop:"keywords",label:"关键字"},{default:l(()=>[p(o,{modelValue:n(S).keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>n(S).keywords=e),placeholder:"日志内容",clearable:"",onKeyup:m(P,["enter"])},null,8,["modelValue"])]),_:1}),p(t,{prop:"createTime",label:"操作时间"},{default:l(()=>[p(T,{modelValue:n(S).createTime,"onUpdate:modelValue":a[1]||(a[1]=e=>n(S).createTime=e),editable:!1,type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),p(t,{class:"search-buttons"},{default:l(()=>[p(q,{type:"primary",icon:"search",onClick:P},{default:l(()=>[...a[5]||(a[5]=[d("搜索",-1)])]),_:1}),p(q,{icon:"refresh",onClick:I},{default:l(()=>[...a[6]||(a[6]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),p(O,{shadow:"hover",class:"data-table"},{default:l(()=>[u((i(),c(L,{data:n(z),"highlight-current-row":"",border:"",class:"data-table__content"},{default:l(()=>[p(F,{label:"操作时间",prop:"createTime",width:"180"}),p(F,{label:"操作人",prop:"operator",width:"120"}),p(F,{label:"日志模块",prop:"module",width:"100"}),p(F,{label:"日志内容",prop:"content","min-width":"200"}),p(F,{label:"IP 地址",prop:"ip",width:"150"}),p(F,{label:"地区",prop:"region",width:"150"}),p(F,{label:"浏览器",prop:"browser",width:"150"}),p(F,{label:"终端系统",prop:"os",width:"200","show-overflow-tooltip":""}),p(F,{label:"执行时间(ms)",prop:"executionTime",width:"150"})]),_:1},8,["data"])),[[R,n(Y)]]),n(C)>0?(i(),c(M,{key:0,total:n(C),"onUpdate:total":a[2]||(a[2]=e=>f(C)?C.value=e:null),page:n(S).pageNum,"onUpdate:page":a[3]||(a[3]=e=>n(S).pageNum=e),limit:n(S).pageSize,"onUpdate:limit":a[4]||(a[4]=e=>n(S).pageSize=e),onPagination:A},null,8,["total","page","limit"])):j("",!0)]),_:1})])}}});export{U as default};
