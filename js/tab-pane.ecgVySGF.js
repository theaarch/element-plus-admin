import{cx as e,ct as a,cu as t,dk as l,cc as s,t as n,z as o,_ as r,d as i,A as u,b as d,r as v,I as c,af as b,aa as p,g as f,f as m,k as h,n as g,i as y,a9 as x,U as w,dE as $,dF as C,s as R,c as E,dG as P,o as k,bY as N,dt as T,m as S,E as j,cH as B,a8 as A,K as F,L as _,a2 as L,M as z,a$ as V,l as K,dw as M,B as O,y as W,bz as I,c4 as U,S as X,bA as Y,$ as q,h as G,a1 as H,q as D,G as J}from"./index.B9DDwXyn.js";import{i as Q,c as Z,r as ee}from"./raf.BPqLmvY8.js";import{m as ae}from"./typescript.CRqm1_SZ.js";import{c as te}from"./strings.DxzcQhMs.js";import{t as le}from"./error.D_Dr4eZ1.js";import{t as se}from"./toNumber.BgQEYUe1.js";import{U as ne}from"./event.BwRzfsZt.js";import{u as oe}from"./index.BHhVQ01S.js";import{g as re,b as ie}from"./_baseClone.O-Y6IxeR.js";import{c as ue}from"./_initCloneObject.G0Dih7LI.js";import{a as de}from"./index.DBPJmu1s.js";function ve(a,t){return t.length<2?a:e(a,function(e,a,t){var l=-1,s=e.length;a<0&&(a=-a>s?0:s+a),(t=t>s?s:t)<0&&(t+=s),s=a>t?0:t-a>>>0,a>>>=0;for(var n=Array(s);++l<s;)n[l]=e[l+a];return n}(t,0,-1))}function ce(e,l){return null==(e=ve(e,l=a(l,e)))||delete e[t((s=l,n=null==s?0:s.length,n?s[n-1]:void 0))];var s,n}function be(e){return Q(e)?void 0:e}var pe=de(function(e,t){var s={};if(null==e)return s;var n=!1;t=l(t,function(t){return t=a(t,e),n||(n=t.length>1),t}),ue(e,re(e),s),n&&(s=ie(s,7,be));for(var o=t.length;o--;)ce(s,t[o]);return s});const fe="horizontal",me="vertical",he={[fe]:"deltaX",[me]:"deltaY"},ge=Symbol("tabsRootContextKey"),ye=n({tabs:{type:o(Array),default:()=>ae([])},tabRefs:{type:o(Object),default:()=>ae({})}}),xe="ElTabBar",we=i({name:xe});var $e=r(i({...we,props:ye,setup(e,{expose:a}){const t=e,l=u(ge);l||le(xe,"<el-tabs><el-tab-bar /></el-tabs>");const s=d("tabs"),n=v(),o=v(),r=()=>o.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(x(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${te(o)}`],a=n[`client${te(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${te(n)}(${e}px)`}})(),i=[];c(()=>t.tabs,async()=>{await w(),r(),i.forEach(e=>e.stop()),i.length=0,Object.values(t.tabRefs).forEach(e=>{i.push(b(e,r))})},{immediate:!0});const $=b(n,()=>r());return p(()=>{i.forEach(e=>e.stop()),i.length=0,$.stop()}),a({ref:n,update:r}),(e,a)=>(m(),f("div",{ref_key:"barRef",ref:n,class:g([y(s).e("active-bar"),y(s).is(y(l).props.tabPosition)]),style:h(o.value)},null,6))}}),[["__file","tab-bar.vue"]]);const Ce=n({panes:{type:o(Array),default:()=>ae([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Re="ElTabNav",Ee=i({name:Re,props:Ce,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=u(ge);l||le(Re,"<el-tabs><tab-nav /></el-tabs>");const n=d("tabs"),o=$(),r=C(),i=v(),p=v(),f=v(),m=v({}),h=v(),g=v(!1),y=v(0),x=v(!1),z=v(!0),V=R(),K=E(()=>["top","bottom"].includes(l.props.tabPosition)),M=E(()=>K.value?"width":"height"),O=E(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${y.value}px)`})),{width:W,height:I}=P(i),{width:U,height:X}=P(p,{width:0,height:0},{box:"border-box"}),Y=E(()=>K.value?W.value:I.value),q=E(()=>K.value?U.value:X.value),{onWheel:G}=(({atEndEdge:e,atStartEdge:a,layout:t},l)=>{let n,o=0;const r=t=>t<0&&a.value||t>0&&e.value;return{hasReachedEdge:r,onWheel:e=>{Z(n);const a=e[he[t.value]];r(o)&&r(o+a)||(o+=a,s()||e.preventDefault(),n=ee(()=>{l(o),o=0}))}}})({atStartEdge:E(()=>y.value<=0),atEndEdge:E(()=>q.value-y.value<=Y.value),layout:E(()=>K.value?"horizontal":"vertical")},e=>{var a,t,l;y.value=(a=y.value+e,t=0,void 0===(l=q.value-Y.value)&&(l=t,t=void 0),void 0!==l&&(l=(l=se(l))==l?l:0),void 0!==t&&(t=(t=se(t))==t?t:0),function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(se(a),t,l))}),H=()=>{if(!i.value)return;const e=i.value[`offset${te(M.value)}`],a=y.value;if(!a)return;const t=a>e?a-e:0;y.value=t},D=()=>{if(!i.value||!p.value)return;const e=p.value[`offset${te(M.value)}`],a=i.value[`offset${te(M.value)}`],t=y.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;y.value=l},J=async()=>{const a=p.value;if(!(g.value&&f.value&&i.value&&a))return;await w();const t=m.value[e.currentName];if(!t)return;const l=i.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=K.value?a.offsetWidth-n.width:a.offsetHeight-n.height,r=y.value;let u=r;K.value?(s.left<n.left&&(u=r-(n.left-s.left)),s.right>n.right&&(u=r+s.right-n.right)):(s.top<n.top&&(u=r-(n.top-s.top)),s.bottom>n.bottom&&(u=r+(s.bottom-n.bottom))),u=Math.max(u,0),y.value=Math.min(u,o)},Q=()=>{var a;if(!p.value||!i.value)return;e.stretch&&(null==(a=h.value)||a.update());const t=p.value[`offset${te(M.value)}`],l=i.value[`offset${te(M.value)}`],s=y.value;l<t?(g.value=g.value||{},g.value.prev=s,g.value.next=s+l<t,t-s<l&&(y.value=t-l)):(g.value=!1,s>0&&(y.value=0))},ae=e=>{let a=0;switch(F(e)){case _.left:case _.up:a=-1;break;case _.right:case _.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),ne()},ne=()=>{z.value&&(x.value=!0)},oe=()=>x.value=!1;return c(o,e=>{"hidden"===e?z.value=!1:"visible"===e&&setTimeout(()=>z.value=!0,50)}),c(r,e=>{e?setTimeout(()=>z.value=!0,50):z.value=!1}),b(f,Q),k(()=>setTimeout(()=>J(),0)),N(()=>Q()),a({scrollToActiveTab:J,removeFocus:oe,focusActiveTab:async()=>{await w();const a=m.value[e.currentName];null==a||a.focus({preventScroll:!0})},tabListRef:p,tabBarRef:h,scheduleRender:()=>T(V)}),()=>{const a=g.value?[S("span",{class:[n.e("nav-prev"),n.is("disabled",!g.value.prev)],onClick:H},[S(j,null,{default:()=>[S(B,null,null)]})]),S("span",{class:[n.e("nav-next"),n.is("disabled",!g.value.next)],onClick:D},[S(j,null,{default:()=>[S(A,null,null)]})])]:null,s=e.panes.map((a,s)=>{var o,r,i,u;const d=a.uid,v=a.props.disabled,c=null!=(r=null!=(o=a.props.name)?o:a.index)?r:`${s}`,b=!v&&(a.isClosable||!1!==a.props.closable&&e.editable);a.index=`${s}`;const p=b?S(j,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[S(L,null,null)]}):null,f=(null==(u=(i=a.slots).label)?void 0:u.call(i))||a.props.label,h=!v&&a.active?0:-1;return S("div",{ref:e=>((e,a)=>{m.value[a]=e})(e,c),class:[n.e("item"),n.is(l.props.tabPosition),n.is("active",a.active),n.is("disabled",v),n.is("closable",b),n.is("focus",x.value)],id:`tab-${c}`,key:`tab-${d}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":a.active,tabindex:h,onFocus:()=>ne(),onBlur:()=>oe(),onClick:e=>{oe(),t("tabClick",a,c,e)},onKeydown:e=>{const l=F(e);!b||l!==_.delete&&l!==_.backspace||t("tabRemove",a,e)}},[f,p])});return V.value,S("div",{ref:f,class:[n.e("nav-wrap"),n.is("scrollable",!!g.value),n.is(l.props.tabPosition)]},[a,S("div",{class:n.e("nav-scroll"),ref:i},[e.panes.length>0?S("div",{class:[n.e("nav"),n.is(l.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:p,style:O.value,role:"tablist",onKeydown:ae,onWheel:G},[e.type?null:S($e,{ref:h,tabs:[...e.panes],tabRefs:m.value},null),s]):null])])}}}),Pe=n({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:o(Function),default:()=>!0},stretch:Boolean}),ke=e=>z(e)||V(e);var Ne=i({name:"ElTabs",props:Pe,emits:{[ne]:e=>ke(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ke(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ke(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=d("tabs"),o=E(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:i,removeChild:u,ChildrenSorter:b}=oe(O(),"ElTabPane"),p=v(),f=v(null!=(s=e.modelValue)?s:"0"),m=async(t,l=!1)=>{var s,n,o,i;if(f.value!==t&&!x(t))try{let u;if(e.beforeLeave){const a=e.beforeLeave(t,f.value);u=a instanceof Promise?await a:a}else u=!0;if(!1!==u){const e=null==(s=r.value.find(e=>e.paneName===f.value))?void 0:s.isFocusInsidePane();f.value=t,l&&(a(ne,t),a("tabChange",t)),null==(o=null==(n=p.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(i=p.value)||i.focusActiveTab())}}catch(u){}},h=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),m(t,!0))},g=(e,t)=>{e.props.disabled||x(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},y=()=>{a("edit",void 0,"add"),a("tabAdd")},$=e=>{const a=F(e);[_.enter,_.numpadEnter].includes(a)&&y()},C=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return c(()=>e.modelValue,e=>m(e)),c(f,async()=>{var e;await w(),null==(e=p.value)||e.scrollToActiveTab()}),W(ge,{props:e,currentName:f,registerPane:i,unregisterPane:u,nav$:p}),l({currentName:f,get tabNavRef(){return pe(p.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?S("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:y,onKeydown:$},[a?K(t,"add-icon"):S(j,{class:n.is("icon-plus")},{default:()=>[S(M,null,null)]})]):null,s=S("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[S(b,null,{default:()=>S(Ee,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:h,onTabRemove:g},null),$stable:!0}),l]),i=S("div",{class:n.e("content")},[K(t,"default")]);return S("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:C,onVnodeUpdated:C},[i,s])}}});const Te=n({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Se="ElTabPane",je=i({name:Se});var Be=r(i({...je,props:Te,setup(e){const a=e,t=O(),l=I(),s=u(ge);s||le(Se,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=d("tab-pane"),o=v(),r=v(),i=E(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),b=U(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:r.value)}),h=v(b.value),x=E(()=>{var e;return null!=(e=a.name)?e:r.value}),w=U(()=>!a.lazy||h.value||b.value);c(b,e=>{e&&(h.value=!0)});const $=X({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:x,active:b,index:r,isClosable:i,isFocusInsidePane:()=>{var e;return null==(e=o.value)?void 0:e.contains(document.activeElement)}});return s.registerPane($),p(()=>{s.unregisterPane($)}),Y(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>y(w)?q((m(),f("div",{key:0,id:`pane-${y(x)}`,ref_key:"paneRef",ref:o,class:g(y(n).b()),role:"tabpanel","aria-hidden":!y(b),"aria-labelledby":`tab-${y(x)}`},[K(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[H,y(b)]]):G("v-if",!0)}}),[["__file","tab-pane.vue"]]);const Ae=D(Ne,{TabPane:Be}),Fe=J(Be);export{Fe as E,Ae as a};
