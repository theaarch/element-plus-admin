import{t as e,bS as a,c as s,bT as l,r as t,I as o,u as r,aa as i,J as d,_ as n,d as u,bz as f,b as v,x as c,e as p,f as b,w as m,m as y,T as h,i as g,$ as k,C as w,Z as C,j as z,g as A,h as R,n as x,l as E,F,E as _,a2 as L,k as T,a1 as $,q as S}from"./index.B9DDwXyn.js";import{d as B,a as I,u as j,b as H}from"./overlay.CaF_iYQP.js";import{E as q,a as D}from"./index.DI7Lq47c.js";import{u as P}from"./index.BpkllUJ0.js";const O=e({...I,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),X=B;function Y(e,n){const{width:u,height:f}=a(),v=s(()=>["ltr","rtl"].includes(e.direction)),c=s(()=>["ltr","ttb"].includes(e.direction)?1:-1),p=s(()=>v.value?u.value:f.value),b=s(()=>l(m.value+c.value*y.value,4,p.value)),m=t(0),y=t(0),h=t(!1),g=t(!1);let k=[],w=[];o(()=>[e.size,e.resizable],()=>{g.value=!1,m.value=0,y.value=0,z()});const C=e=>{const{pageX:a,pageY:s}=e,l=a-k[0],t=s-k[1];y.value=v.value?l:t},z=()=>{k=[],m.value=b.value,y.value=0,h.value=!1,w.forEach(e=>null==e?void 0:e()),w=[]},A=r(n,"mousedown",a=>{e.resizable&&(g.value||(m.value=(()=>{var e;const a=null==(e=n.value)?void 0:e.closest('[aria-modal="true"]');return a?v.value?a.offsetWidth:a.offsetHeight:100})(),g.value=!0),k=[a.pageX,a.pageY],h.value=!0,w.push(r(window,"mouseup",z),r(window,"mousemove",C)))});return i(()=>{A(),z()}),{size:s(()=>g.value?`${b.value}px`:d(e.size)),isResizing:h,isHorizontal:v}}const J=u({name:"ElDrawer",inheritAttrs:!1});const M=S(n(u({...J,props:O,emits:X,setup(e,{expose:a}){const l=e,o=f();P({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},s(()=>!!o.title));const r=t(),i=t(),d=t(),n=v("drawer"),{t:u}=c(),{afterEnter:S,afterLeave:B,beforeLeave:I,visible:O,rendered:X,titleId:J,bodyId:M,zIndex:N,onModalClick:U,onOpenAutoFocus:W,onCloseAutoFocus:Z,onFocusoutPrevented:G,onCloseRequested:K,handleClose:Q}=j(l,r),{isHorizontal:V,size:ee,isResizing:ae}=Y(l,d);return a({handleClose:Q,afterEnter:S,afterLeave:B}),(e,a)=>(b(),p(g(D),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:m(()=>[y(h,{name:g(n).b("fade"),onAfterEnter:g(S),onAfterLeave:g(B),onBeforeLeave:g(I),persisted:""},{default:m(()=>{var a;return[k(y(g(H),{mask:e.modal,"overlay-class":[g(n).is("drawer"),null!=(a=e.modalClass)?a:""],"z-index":g(N),onClick:g(U)},{default:m(()=>[y(g(q),{loop:"",trapped:g(O),"focus-trap-el":r.value,"focus-start-el":i.value,onFocusAfterTrapped:g(W),onFocusAfterReleased:g(Z),onFocusoutPrevented:g(G),onReleaseRequested:g(K)},{default:m(()=>[w("div",C({ref_key:"drawerRef",ref:r,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:g(J),"aria-describedby":g(M)},e.$attrs,{class:[g(n).b(),e.direction,g(O)&&"open",g(n).is("dragging",g(ae))],style:{[g(V)?"width":"height"]:g(ee)},role:"dialog",onClick:z(()=>{},["stop"])}),[w("span",{ref_key:"focusStartRef",ref:i,class:x(g(n).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(b(),A("header",{key:0,class:x([g(n).e("header"),e.headerClass])},[e.$slots.title?E(e.$slots,"title",{key:1},()=>[R(" DEPRECATED SLOT ")]):E(e.$slots,"header",{key:0,close:g(Q),titleId:g(J),titleClass:g(n).e("title")},()=>[w("span",{id:g(J),role:"heading","aria-level":e.headerAriaLevel,class:x(g(n).e("title"))},F(e.title),11,["id","aria-level"])]),e.showClose?(b(),A("button",{key:2,"aria-label":g(u)("el.drawer.close"),class:x(g(n).e("close-btn")),type:"button",onClick:g(Q)},[y(g(_),{class:x(g(n).e("close"))},{default:m(()=>[y(g(L))]),_:1},8,["class"])],10,["aria-label","onClick"])):R("v-if",!0)],2)):R("v-if",!0),g(X)?(b(),A("div",{key:1,id:g(M),class:x([g(n).e("body"),e.bodyClass])},[E(e.$slots,"default")],10,["id"])):R("v-if",!0),e.$slots.footer?(b(),A("div",{key:2,class:x([g(n).e("footer"),e.footerClass])},[E(e.$slots,"footer")],2)):R("v-if",!0),e.resizable?(b(),A("div",{key:3,ref_key:"draggerRef",ref:d,style:T({zIndex:g(N)}),class:x(g(n).e("dragger"))},null,6)):R("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[$,g(O)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}}),[["__file","drawer.vue"]]));export{M as E};
