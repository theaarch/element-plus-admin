import{d as e,r as a,S as t,o,g as r,f as s,C as i,m as p,w as l,a3 as m,i as n,a4 as d,$ as u,e as c,h as j,aA as f}from"./index.CM47KQtG.js";import{v as g}from"./loading.CxFowczj.js";import{E as b}from"./card.JRjeJkVW.js";import{_}from"./index.DfSWtJFb.js";import{a as h,E as x}from"./table-column.agJiczKe.js";import"./checkbox.DwMVycN-.js";/* empty css                */import"./popper.Dy7mreVG.js";import"./scrollbar.DJ9OeN8B.js";/* empty css            */import{E as y,a as v}from"./form-item.BvU-fErQ.js";/* empty css               */import{E as k}from"./date-picker-panel.MzBxxBl-.js";import{E as w}from"./input.DICT-xuJ.js";import{L as U}from"./log-api.BtcdlNe1.js";import{E as C}from"./index.p5pvUZ8p.js";import"./pagination.BP_3TcMH.js";import"./select.CbuXqiqO.js";import"./index.DB7b8zJj.js";import"./use-form-common-props.CwNouOR0.js";import"./token.DWNpOE8r.js";import"./strings.CuGzRR0G.js";import"./error.D_Dr4eZ1.js";import"./castArray.DwIa-ddT.js";import"./index.BM1Y5O9s.js";import"./aria.Cpd_B0tV.js";import"./event.BwRzfsZt.js";import"./scroll.HB0cktN2.js";import"./debounce.BSbgIsNH.js";import"./toNumber.CTKVBeqF.js";import"./_baseIteratee.Bz4YUaFH.js";import"./index.BpEbxuRh.js";import"./index.ChhW_Tvf.js";import"./vnode.3FsO1Zr2.js";import"./index.C-zw5LL5.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./_initCloneObject.D6_TlKeT.js";import"./raf.UU1-UmoM.js";import"./index.BkpZJorq.js";import"./index.33C-WVq8.js";import"./_baseClone.C_H9MAg3.js";import"./dayjs.min.DxYre9gl.js";import"./index.Ds1pFW66.js";import"./index.DUp9k36Z.js";const E={class:"app-container"},V={class:"search-container"},N=e({name:"Log",inheritAttrs:!1,__name:"Index",setup(e){const N=a(),S=a(!1),T=a(0),Y=t({pageNum:1,pageSize:10,keywords:"",createTime:["",""]}),z=a();function A(){S.value=!0,U.getPage(Y).then(e=>{z.value=e.data,T.value=e.meta.total}).finally(()=>{S.value=!1})}function D(){Y.pageNum=1,A()}function I(){N.value.resetFields(),Y.pageNum=1,Y.createTime=void 0,A()}return o(()=>{D()}),(e,a)=>{const t=w,o=y,U=k,L=C,M=v,P=x,R=h,$=_,F=b,K=g;return s(),r("div",E,[i("div",V,[p(M,{ref_key:"queryFormRef",ref:N,model:n(Y),inline:!0},{default:l(()=>[p(o,{prop:"keywords",label:"关键字"},{default:l(()=>[p(t,{modelValue:n(Y).keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>n(Y).keywords=e),placeholder:"日志内容",clearable:"",onKeyup:m(D,["enter"])},null,8,["modelValue"])]),_:1}),p(o,{prop:"createTime",label:"操作时间"},{default:l(()=>[p(U,{modelValue:n(Y).createTime,"onUpdate:modelValue":a[1]||(a[1]=e=>n(Y).createTime=e),editable:!1,type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),p(o,{class:"search-buttons"},{default:l(()=>[p(L,{type:"primary",icon:"search",onClick:D},{default:l(()=>[...a[5]||(a[5]=[d("搜索",-1)])]),_:1}),p(L,{icon:"refresh",onClick:I},{default:l(()=>[...a[6]||(a[6]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),p(F,{shadow:"hover",class:"data-table"},{default:l(()=>[u((s(),c(R,{data:n(z),"highlight-current-row":"",border:"",class:"data-table__content"},{default:l(()=>[p(P,{label:"Time",prop:"created_at"}),p(P,{label:"User ID",prop:"user_id"}),p(P,{label:"User name",prop:"user.name"}),p(P,{label:"Route name",prop:"route_name"}),p(P,{label:"IP",prop:"ip"}),p(P,{label:"Locale",prop:"locale"}),p(P,{label:"Country code",prop:"country_code"}),p(P,{label:"Status",prop:"status"})]),_:1},8,["data"])),[[K,n(S)]]),n(T)>0?(s(),c($,{key:0,total:n(T),"onUpdate:total":a[2]||(a[2]=e=>f(T)?T.value=e:null),page:n(Y).pageNum,"onUpdate:page":a[3]||(a[3]=e=>n(Y).pageNum=e),limit:n(Y).pageSize,"onUpdate:limit":a[4]||(a[4]=e=>n(Y).pageSize=e),onPagination:A},null,8,["total","page","limit"])):j("",!0)]),_:1})])}}});export{N as default};
