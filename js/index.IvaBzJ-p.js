import{d as e,r as t,S as l,b2 as a,c as o,ar as r,g as s,f as n,k as p,i,m,Z as u,w as d,C as c,$ as f,e as v,h as g,P as y,Q as b,a3 as j,a4 as _,n as h,l as k,F as x,E as w,b9 as V,cC as C}from"./index.DRPoGZBk.js";import{v as U}from"./loading.DIBzycS9.js";import"./popper.BU17CZ-L.js";import{E as S}from"./popover.yPGSVALT.js";import{_ as E}from"./index.DBFSzPNP.js";import{a as N,E as A}from"./table-column.C2ueaBaa.js";import"./checkbox.HknQRT7E.js";/* empty css                */import"./scrollbar.psmrftie.js";/* empty css            */import{a as $,E as R}from"./form-item.BX728IAv.js";/* empty css               */import{E as z}from"./date-picker-panel.CAlEuNg7.js";import{E as I}from"./input.CQ-26BBh.js";import{E as D,a as Y}from"./select.Dg8cxWuu.js";import"./tree.C7HEleVO.js";import"./text.B0WblZFB.js";import{E as M}from"./tree-select.C98Oyw_c.js";/* empty css                */import{E as K}from"./index.CATG-Bau.js";import{E as T}from"./index.CHumVb_u.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as P}from"./DictLabel.vue_vue_type_script_setup_true_lang.CIvc-V1Q.js";import{E as X}from"./link.CM2ZuMlr.js";import{E as Z}from"./index.CjQJJCUT.js";import"./index.F5OfedVa.js";import"./index.SISkM0HS.js";import"./aria.Cpd_B0tV.js";import"./index.YVQhVyFI.js";import"./use-form-common-props.DsMPcFL7.js";import"./dropdown.BgHO8JHY.js";import"./pagination.HPmRLtz8.js";import"./typescript.CRqm1_SZ.js";import"./event.BwRzfsZt.js";import"./index.C88r2BaC.js";import"./error.D_Dr4eZ1.js";import"./_initCloneObject.CljjGAhF.js";import"./raf.Rxgr8PiF.js";import"./_baseIteratee.CeiHmyQH.js";import"./castArray.DubCdOyv.js";import"./debounce.DQPPIhOy.js";import"./toNumber.BFSSBEJo.js";import"./index.CJYjkF3a.js";import"./_baseClone.CEh0Izpu.js";import"./dayjs.min.DqgPjcVY.js";import"./index.CuviTts7.js";import"./index.CQZWqeco.js";import"./index.cDg2wPYz.js";import"./token.DWNpOE8r.js";import"./strings.aj8LsXir.js";import"./scroll.EvVlGgaK.js";import"./vnode.BI5jxDcy.js";import"./index.CfNIqZzg.js";const B={class:"feedback"},L=F(e({__name:"index",props:{selectConfig:{},text:{default:""}},emits:["confirmClick"],setup(e,{emit:V}){const C=e,F=V,P=C.selectConfig.pk??"id",X=!0===C.selectConfig.multiple,Z=C.selectConfig.width??"100%",L=C.selectConfig.placeholder??"请选择",O=t(!1),Q=t(!1),W=t(0),q=t([]),G=l({pageNum:1,pageSize:10}),H=t(),J=t(Z);a(H,e=>{J.value=`${e[0].contentRect.width}px`});const ee=t();for(const t of C.selectConfig.formItems)G[t.prop]=t.initialValue??"";function te(){ee.value?.resetFields(),ae(!0)}function le(){ae(!0)}function ae(e=!1){Q.value=!0,e&&(G.pageNum=1,G.pageSize=10),C.selectConfig.indexAction(G).then(e=>{W.value=e.total,q.value=e.list}).finally(()=>{Q.value=!1})}const oe=t();for(const t of C.selectConfig.tableColumns)if("selection"===t.type){t.reserveSelection=!0;break}const re=t([]),se=o(()=>re.value.length>0?`已选(${re.value.length})`:"确 定");function ne(e){X||0===e.length?re.value=e:(re.value=[e[e.length-1]],oe.value?.clearSelection(),oe.value?.toggleRowSelection(re.value[0],!0),oe.value?.setCurrentRow(re.value[0]))}function pe(e){X&&(re.value=e)}function ie(){ae()}const me=t(!1);function ue(){!1===me.value&&(me.value=!0,ae())}function de(){0!==re.value.length?(O.value=!1,F("confirmClick",re.value)):T.error("请选择数据")}function ce(){oe.value?.clearSelection(),re.value=[]}function fe(){O.value=!1}const ve=t();return(t,l)=>{const a=r("ArrowDown"),o=w,V=I,C=Y,T=D,F=M,ae=z,re=R,me=K,ge=$,ye=A,be=N,je=E,_e=S,he=U;return n(),s("div",{ref_key:"tableSelectRef",ref:H,style:p("width:"+i(Z))},[m(_e,u({visible:O.value,width:J.value,placement:"bottom-end"},e.selectConfig.popover,{onShow:ue}),{reference:d(()=>[c("div",{onClick:l[0]||(l[0]=e=>O.value=!O.value)},[k(t.$slots,"default",{},()=>[m(V,{class:"reference","model-value":e.text,readonly:!0,placeholder:i(L)},{suffix:d(()=>[m(o,{style:p({transform:O.value?"rotate(180deg)":"rotate(0)",transition:"transform .5s"})},{default:d(()=>[m(a)]),_:1},8,["style"])]),_:1},8,["model-value","placeholder"])],!0)])]),default:d(()=>[c("div",{ref_key:"popoverContentRef",ref:ve},[m(ge,{ref_key:"formRef",ref:ee,model:G,inline:!0},{default:d(()=>[(n(!0),s(y,null,b(e.selectConfig.formItems,e=>(n(),v(re,{key:e.prop,label:e.label,prop:e.prop},{default:d(()=>["input"===e.type?(n(),s(y,{key:0},["number"===e.attrs?.type?(n(),v(V,u({key:0,modelValue:G[e.prop],"onUpdate:modelValue":t=>G[e.prop]=t,modelModifiers:{number:!0}},{ref_for:!0},e.attrs,{onKeyup:j(le,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(n(),v(V,u({key:1,modelValue:G[e.prop],"onUpdate:modelValue":t=>G[e.prop]=t},{ref_for:!0},e.attrs,{onKeyup:j(le,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64)):"select"===e.type?(n(),v(T,u({key:1,modelValue:G[e.prop],"onUpdate:modelValue":t=>G[e.prop]=t},{ref_for:!0},e.attrs),{default:d(()=>[(n(!0),s(y,null,b(e.options,e=>(n(),v(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue"])):"tree-select"===e.type?(n(),v(F,u({key:2,modelValue:G[e.prop],"onUpdate:modelValue":t=>G[e.prop]=t},{ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):"date-picker"===e.type?(n(),v(ae,u({key:3,modelValue:G[e.prop],"onUpdate:modelValue":t=>G[e.prop]=t},{ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):(n(),s(y,{key:4},["number"===e.attrs?.type?(n(),v(V,u({key:0,modelValue:G[e.prop],"onUpdate:modelValue":t=>G[e.prop]=t,modelModifiers:{number:!0}},{ref_for:!0},e.attrs,{onKeyup:j(le,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(n(),v(V,u({key:1,modelValue:G[e.prop],"onUpdate:modelValue":t=>G[e.prop]=t},{ref_for:!0},e.attrs,{onKeyup:j(le,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64))]),_:2},1032,["label","prop"]))),128)),m(re,null,{default:d(()=>[m(me,{type:"primary",icon:"search",onClick:le},{default:d(()=>[...l[4]||(l[4]=[_("搜索",-1)])]),_:1}),m(me,{icon:"refresh",onClick:te},{default:d(()=>[...l[5]||(l[5]=[_("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),f((n(),v(be,{ref_key:"tableRef",ref:oe,data:q.value,border:!0,"max-height":250,"row-key":i(P),"highlight-current-row":!0,class:h({radio:!X}),onSelect:ne,onSelectAll:pe},{default:d(()=>[(n(!0),s(y,null,b(e.selectConfig.tableColumns,e=>(n(),s(y,{key:e.prop},["custom"===e.templet?(n(),v(ye,u({key:0,ref_for:!0},e),{default:d(l=>[k(t.$slots,e.slotName??e.prop,u({prop:e.prop},{ref_for:!0},l),void 0,!0)]),_:2},1040)):(n(),v(ye,u({key:1,ref_for:!0},e),null,16))],64))),128))]),_:3},8,["data","row-key","class"])),[[he,Q.value]]),W.value>0?(n(),v(je,{key:0,total:W.value,"onUpdate:total":l[1]||(l[1]=e=>W.value=e),page:G.pageNum,"onUpdate:page":l[2]||(l[2]=e=>G.pageNum=e),limit:G.pageSize,"onUpdate:limit":l[3]||(l[3]=e=>G.pageSize=e),onPagination:ie},null,8,["total","page","limit"])):g("",!0),c("div",B,[m(me,{type:"primary",size:"small",onClick:de},{default:d(()=>[_(x(se.value),1)]),_:1}),m(me,{size:"small",onClick:ce},{default:d(()=>[...l[6]||(l[6]=[_("清 空",-1)])]),_:1}),m(me,{size:"small",onClick:fe},{default:d(()=>[...l[7]||(l[7]=[_("关 闭",-1)])]),_:1})])],512)]),_:3},16,["visible","width"])],4)}}}),[["__scopeId","data-v-50915979"]]),O={pk:"id",width:"70%",placeholder:"请选择用户",formItems:[{type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"150px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"100px"}},options:[{label:"启用",value:1},{label:"禁用",value:0}]},{type:"date-picker",label:"创建时间",prop:"createAt",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"240px"}}}],indexAction(e){if("createAt"in e){const t=e.createAt;t?.length>1&&(e.startTime=t[0],e.endTime=t[1]),delete e.createAt}return V.getPage(e)},tableColumns:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100},{label:"用户名",align:"center",prop:"username"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"gender",width:100,templet:"custom",slotName:"gender"},{label:"部门",align:"center",prop:"deptName",width:120},{label:"手机号码",align:"center",prop:"mobile",width:120},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180}]},Q={class:"app-container"},W=e({__name:"index",setup(e){const l=C(),a=t();function r(e){a.value=e[0]}const p=o(()=>{const e=l.getDictItems("gender"),t=e.find(e=>e.value==a.value?.gender)?.label;return a.value?`${a.value.username} - ${t} - ${a.value.deptName}`:""});return(e,t)=>{const l=X,a=Z,o=P,u=L;return n(),s("div",Q,[m(l,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/table-select/index.vue",type:"primary",target:"_blank",class:"mb-10"},{default:d(()=>[...t[0]||(t[0]=[_(" 示例源码 请点击>>>> ",-1)])]),_:1}),m(u,{text:i(p),"select-config":i(O),onConfirmClick:r},{status:d(e=>[m(a,{type:1==e.row[e.prop]?"success":"info"},{default:d(()=>[_(x(1==e.row[e.prop]?"启用":"禁用"),1)]),_:2},1032,["type"])]),gender:d(e=>[m(o,{modelValue:e.row.gender,"onUpdate:modelValue":t=>e.row.gender=t,code:"gender"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["text","select-config"])])}}});export{W as default};
