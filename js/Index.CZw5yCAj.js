import{d as e,r as a,S as t,o as r,g as o,f as s,C as p,m as i,w as l,i as m,a4 as n,$ as d,e as c,h as u,P as j,Q as f,aA as _,aG as g}from"./index.BRkeMZJ3.js";import{v as b}from"./loading.Dn8Ekme4.js";import{E as h}from"./card.CST3Uq_k.js";import{_ as x}from"./index.yFkdAzYu.js";import{a as v,E as y}from"./table-column.BjRyRvOQ.js";import"./checkbox.Dpesx2gT.js";/* empty css                */import"./popper.DER5TYS7.js";import"./scrollbar.DMKyA7dr.js";/* empty css            */import{E as k,a as C}from"./form-item.JlMsiVsg.js";/* empty css               */import{E}from"./date-picker-panel.QRhWJeoR.js";import"./input.Bux73yZ-.js";import{L as U}from"./log-api.CSZgY7rk.js";import{f as w}from"./formatters.nkZtAjN3.js";import{E as A}from"./index.BR6POwKd.js";import"./pagination.DlOl3sdC.js";import"./select.DHMx-tmf.js";import"./index.KX8zJy3q.js";import"./use-form-common-props.CqA0Qg8c.js";import"./token.DWNpOE8r.js";import"./strings.DGUDJ19u.js";import"./error.D_Dr4eZ1.js";import"./castArray.pFen9Tkv.js";import"./index.VuFFzU1E.js";import"./aria.Cpd_B0tV.js";import"./event.BwRzfsZt.js";import"./scroll.C927-KDk.js";import"./debounce.rjHeiI51.js";import"./toNumber.EWNBt7Mu.js";import"./_baseIteratee.CjqgL3zj.js";import"./index.BRiHEm1a.js";import"./index.CEucKegN.js";import"./vnode.CYWHXGFs.js";import"./index.wVkM0nba.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./_initCloneObject.J_PfCM3P.js";import"./raf.Bwc5kBDX.js";import"./index.Cuc277AH.js";import"./index.DD4tnXLg.js";import"./_baseClone.BF5RejrX.js";import"./dayjs.min.Cw18mfHk.js";import"./index.CsUb5NiF.js";import"./index.CHnr7aKg.js";const S=()=>[new Date(0,0,0,0,0,0),new Date(0,0,0,23,59,59)],D={class:"app-container"},I={class:"search-container"},L=e({name:"Logs",inheritAttrs:!1,__name:"Index",setup(e){const L=a(!1),P=a([]),V=[{prop:"created_at",label:"Created At",formatter:w},{prop:"user_id",label:"User ID"},{prop:"user.name",label:"User name",formatter:e=>e.user?.name||""},{prop:"route_name",label:"Route name"},{prop:"ip",label:"IP"},{prop:"locale",label:"Locale"},{prop:"country_code",label:"Country code"},{prop:"status",label:"Status"}],F=a(0),R=a(),$=t({page:1,per_page:10});async function N(){L.value=!0;try{const e=await U.getPage($);P.value=e.data,F.value=e.meta.total}catch(e){g.error("Failed to load data.")}finally{L.value=!1}}function Q(){$.page=Number($.page)||1,N()}function Y(){R.value?.resetFields?.(),$.page=1,$.created_at=void 0,N()}return r(N),(e,a)=>{const t=E,r=k,g=A,U=C,w=y,Z=v,z=x,B=h,G=b;return s(),o("div",D,[p("div",I,[i(U,{ref_key:"filtersForm",ref:R,model:m($),inline:!0},{default:l(()=>[i(r,{prop:"created_at",label:"Created At"},{default:l(()=>[i(t,{modelValue:m($).created_at,"onUpdate:modelValue":a[0]||(a[0]=e=>m($).created_at=e),type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date","default-time":m(S)()},null,8,["modelValue","default-time"])]),_:1}),i(r,{class:"search-buttons"},{default:l(()=>[i(g,{type:"primary",icon:"search",loading:m(L),onClick:Q},{default:l(()=>[...a[4]||(a[4]=[n(" Search ",-1)])]),_:1},8,["loading"]),i(g,{icon:"refresh",onClick:Y},{default:l(()=>[...a[5]||(a[5]=[n("Reset",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),i(B,{shadow:"hover",class:"data-table"},{default:l(()=>[d((s(),c(Z,{data:m(P),"highlight-current-row":"",border:"",class:"data-table__content"},{default:l(()=>[(s(),o(j,null,f(V,e=>i(w,{key:e.prop,prop:e.prop,label:e.label,formatter:e.formatter},null,8,["prop","label","formatter"])),64))]),_:1},8,["data"])),[[G,m(L)]]),m(F)>0?(s(),c(z,{key:0,total:m(F),"onUpdate:total":a[1]||(a[1]=e=>_(F)?F.value=e:null),page:m($).page,"onUpdate:page":a[2]||(a[2]=e=>m($).page=e),limit:m($).per_page,"onUpdate:limit":a[3]||(a[3]=e=>m($).per_page=e),onPagination:N},null,8,["total","page","limit"])):u("",!0)]),_:1})])}}});export{L as default};
