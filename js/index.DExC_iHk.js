import{u as e,_ as t,a as r,b as a}from"./usePage.CWL4k3-y.js";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang.5g-csi10.js";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang.r1TgCCrR.js";import{r as i,S as p,b9 as s,ak as n,aq as c,d,o as m,g as u,f as g,C as b,m as f,w as h,a4 as y,i as w,P as x,e as j,h as v,F as k,Z as _}from"./index.B9DDwXyn.js";import{E as C}from"./text.dsXhSvF4.js";import{_ as V}from"./DictLabel.vue_vue_type_script_setup_true_lang.SkLfa2bK.js";/* empty css            *//* empty css               */import{E as A}from"./link.BNbwefWQ.js";import{D as T}from"./dept-api.C6A-cFxd.js";import{R as D}from"./role-api.C8x4IH5G.js";/* empty css                */import{E as S}from"./index.BJydFClc.js";/* empty css                    */import"./input.h3oSW7Fu.js";import"./overlay.CaF_iYQP.js";import{E as P}from"./index.C4LHJRvW.js";import{E as I}from"./index.FlroawDi.js";import{E as M}from"./index.DN4bf5hU.js";import"./scrollbar.Bhy-xkQk.js";import"./error.D_Dr4eZ1.js";import"./index.DBPJmu1s.js";import"./drawer.JYMO-2nd.js";import"./index.DI7Lq47c.js";import"./aria.Cpd_B0tV.js";import"./index.BpkllUJ0.js";import"./form-item.D3h4sxEF.js";import"./use-form-common-props.Cfh8sL7v.js";import"./castArray.CurgOZrE.js";import"./_baseClone.O-Y6IxeR.js";import"./_initCloneObject.G0Dih7LI.js";import"./col.BNK7KSWI.js";import"./typescript.CRqm1_SZ.js";/* empty css                */import"./popper.tjIFXnGm.js";import"./index.C8Gfv6TL.js";import"./index.C3rz65OD.js";import"./popover.Bw6dwdmc.js";import"./dropdown.D2TyLgT-.js";import"./tab-pane.ecgVySGF.js";import"./raf.BPqLmvY8.js";import"./strings.DxzcQhMs.js";import"./toNumber.BgQEYUe1.js";import"./event.BwRzfsZt.js";import"./index.BHhVQ01S.js";import"./vnode.BymF0sgh.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./select.DXDT8lei.js";import"./token.DWNpOE8r.js";import"./index.-MvgtnPj.js";import"./scroll.iVt-7v8H.js";import"./debounce.DpZxVawV.js";import"./_baseIteratee.D7y0cmdm.js";import"./index.Csx3iWGu.js";import"./switch.CNa6NZvE.js";import"./checkbox.PfgpXjIm.js";import"./radio-group.xG2HYvqK.js";import"./input-number.Cq0380tO.js";import"./index.Cxq1v0nf.js";import"./date-picker-panel.B9Rryhb6.js";import"./dayjs.min.GNs_YU_p.js";import"./index.CMoYSvzR.js";import"./tree.hG9d5X2A.js";import"./index.DrJPKNhY.js";import"./tree-select.DngVr6ky.js";/* empty css                       */import"./loading.DgVxatZq.js";import"./upload.C22gpTfk.js";import"./progress.DJgmlnaV.js";import"./pagination.BAmVJ6nm.js";import"./table-column.HahAEEQU.js";import"./image-viewer.m8BwxPOz.js";import"./card.BXy-Ncik.js";import"./refs.Cw5r5QN8.js";const R=i([]),N=i([]),Y=i([{label:"启用",value:1},{label:"禁用",value:0}]),E=p({permPrefix:"sys:user",dialog:{title:"新增用户",width:800,draggable:!0},form:{labelWidth:100},formAction:s.create,beforeSubmit(e){},formItems:[{label:"用户名",prop:"username",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户名"},col:{xs:24,sm:12}},{label:"用户昵称",prop:"nickname",rules:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户昵称"},col:{xs:24,sm:12}},{label:"所属部门",prop:"deptId",rules:[{required:!0,message:"所属部门不能为空",trigger:"change"}],type:"tree-select",attrs:{placeholder:"请选择所属部门",data:R,filterable:!0,"check-strictly":!0,"render-after-expand":!1}},{type:"custom",label:"性别",prop:"gender",initialValue:1,attrs:{style:{width:"100%"}}},{label:"角色",prop:"roleIds",rules:[{required:!0,message:"用户角色不能为空",trigger:"change"}],type:"select",attrs:{placeholder:"请选择",multiple:!0},options:N,initialValue:[]},{type:"input",label:"手机号码",prop:"mobile",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{placeholder:"请输入手机号码",maxlength:11}},{label:"邮箱",prop:"email",rules:[{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,message:"请输入正确的邮箱地址",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入邮箱",maxlength:50}},{label:"状态",prop:"status",type:"radio",options:[{label:"正常",value:1},{label:"禁用",value:0}],initialValue:1},{type:"custom",label:"二级弹窗",prop:"openModal",slotName:"openModal"}]}),q={permPrefix:"sys:user",table:{border:!0,highlightCurrentRow:!0},pagination:{background:!0,layout:"prev,pager,next,jumper,total,sizes",pageSize:20,pageSizes:[10,20,30,50]},parseData:e=>({total:e.total,list:e.list}),indexAction:e=>s.getPage(e),deleteAction:s.deleteByIds,importAction:e=>s.import("1",e),exportAction:s.export,importTemplate:s.downloadTemplate,importsAction:e=>Promise.resolve(),exportsAction:async e=>(await s.getPage(e)).list,pk:"id",toolbar:["add","delete","import","export",{name:"custom1",text:"自定义1",perm:"add",attrs:{icon:"plus",color:"#626AEF"}}],defaultToolbar:["refresh","filter","imports","exports","search"],cols:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100,show:!1},{label:"用户名",align:"center",prop:"username"},{label:"头像",align:"center",prop:"avatar",templet:"image"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"gender",width:100,templet:"custom",slotName:"gender"},{label:"部门",align:"center",prop:"deptName",width:120},{label:"角色",align:"center",prop:"roleNames",width:120,columnKey:"roleIds",filters:[],filterMultiple:!0,filterJoin:",",async initFn(e){const t=await D.getOptions();e.filters=t.map(e=>({text:e.label,value:e.value}))}},{label:"手机号码",align:"center",prop:"mobile",templet:"custom",slotName:"mobile",width:150},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180},{label:"操作",align:"center",fixed:"right",width:280,templet:"tool",operat:[{name:"detail",text:"详情",attrs:{icon:"Document",type:"primary"}},{name:"reset_pwd",text:"重置密码",attrs:{icon:"refresh-left",style:{"--el-button-text-color":"#626AEF","--el-button-hover-link-text-color":"#9197f4"}}},"edit","delete"]}]},z=p({permPrefix:"sys:user",component:"drawer",drawer:{title:"修改用户",size:n().device===c.MOBILE?"80%":500},pk:"id",beforeSubmit(e){},formAction:e=>s.update(e.id,e),formItems:[{label:"用户名",prop:"username",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户名",readonly:!0}},{label:"用户昵称",prop:"nickname",rules:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入用户昵称"}},{label:"所属部门",prop:"deptId",rules:[{required:!0,message:"所属部门不能为空",trigger:"blur"}],type:"tree-select",attrs:{placeholder:"请选择所属部门",data:R,filterable:!0,"check-strictly":!0,"render-after-expand":!1}},{type:"custom",label:"性别",prop:"gender",initialValue:1,attrs:{style:{width:"100%"}}},{label:"角色",prop:"roleIds",rules:[{required:!0,message:"用户角色不能为空",trigger:"blur"}],type:"select",attrs:{placeholder:"请选择",multiple:!0},options:N,initialValue:[]},{type:"input",label:"手机号码",prop:"mobile",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{placeholder:"请输入手机号码",maxlength:11}},{label:"邮箱",prop:"email",rules:[{pattern:/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/,message:"请输入正确的邮箱地址",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入邮箱",maxlength:50}},{label:"状态",prop:"status",type:"switch",attrs:{inlinePrompt:!0,activeText:"正常",inactiveText:"禁用",activeValue:1,inactiveValue:0}}]}),F={permPrefix:"sys:user",formItems:[{tips:"支持模糊搜索",type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:R,filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"200px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"200px"}},options:Y},{type:"date-picker",label:"创建时间",prop:"createTime",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"200px"}}}]},O=p({colon:!0,dialog:{title:"二级弹窗",width:500,draggable:!0},form:{labelWidth:"auto",labelPosition:"top"},formItems:[{label:"用户名",prop:"username",rules:[{required:!0,message:"用户名不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入"}},{label:"用户昵称",prop:"nickname",rules:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],type:"input",attrs:{placeholder:"请输入"}},{label:"所属部门",prop:"deptId",rules:[{required:!0,message:"所属部门不能为空",trigger:"change"}],type:"tree-select",attrs:{placeholder:"请选择",data:R,filterable:!0,"check-strictly":!0,"render-after-expand":!1}},{type:"custom",label:"性别",prop:"gender",initialValue:1,attrs:{style:{width:"100%"}}}]}),U={table:{showOverflowTooltip:!0},pagePosition:"right",toolbar:[],indexAction:e=>Promise.resolve({total:2,list:[{id:1,username:"root",avatar:"https://foruda.gitee.com/images/1723603502796844527/03cdca2a_716974.gif",percent:99,price:10,url:"https://www.baidu.com",icon:"el-icon-setting",gender:1,status:1,status2:1,sort:99,createTime:1715647982437},{id:2,username:"jerry",avatar:"https://foruda.gitee.com/images/1723603502796844527/03cdca2a_716974.gif",percent:88,price:999,url:"https://www.google.com",icon:"el-icon-user",gender:0,status:0,status2:0,sort:0,createTime:1715648977426}]}),modifyAction:e=>(S.success(JSON.stringify(e)),Promise.resolve(null)),cols:[{type:"index",width:50,align:"center"},{label:"ID",align:"center",prop:"id",show:!1},{label:"文本",align:"center",prop:"username"},{label:"图片",align:"center",prop:"avatar",templet:"image"},{label:"百分比",align:"center",prop:"percent",templet:"percent"},{label:"货币符",align:"center",prop:"price",templet:"price",priceFormat:"$"},{label:"链接",align:"center",prop:"url",width:180,templet:"url"},{label:"图标",align:"center",prop:"icon",templet:"icon"},{label:"列表值",align:"center",prop:"gender",templet:"list",selectList:{0:"女",1:"男"}},{label:"自定义",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"Switch",align:"center",prop:"status2",templet:"switch",activeValue:1,inactiveValue:0,activeText:"启用",inactiveText:"禁用"},{label:"输入框",align:"center",prop:"sort",templet:"input",inputType:"number"},{label:"日期格式化",align:"center",prop:"createTime",minWidth:120,templet:"date",dateFormat:"YYYY/MM/DD HH:mm:ss"},{label:"操作栏",align:"center",fixed:"right",width:220,templet:"tool",operat:["view","edit",{name:"delete",text:"展示删除",perm:"delete",attrs:{icon:"delete",type:"danger"},render:e=>1!==e.id}]}]},Z=p({permPrefix:"sys:user",component:"drawer",colon:!0,pk:"id",drawer:{title:"修改用户",size:n().device===c.MOBILE?"80%":500},form:{labelPosition:"right",labelWidth:"auto"},beforeSubmit(e){},formAction:e=>(S.success(JSON.stringify(e)),Promise.resolve(null)),formItems:[{tips:{effect:"light",placement:"top",content:"自定义文字提示"},type:"input",label:"文本",prop:"username",attrs:{placeholder:"请输入",clearable:!0}},{type:"input-number",label:"百分比",prop:"percent",attrs:{placeholder:"请输入",controls:!1},slotName:"suffix"},{type:"input-number",label:"货币符",prop:"price",attrs:{placeholder:"请输入",controls:!1},slotName:"prefix"},{type:"input",label:"链接",prop:"url",attrs:{placeholder:"请输入",clearable:!0}},{type:"icon-select",label:"链接",prop:"icon"},{type:"custom",label:"列表值",prop:"gender",slotName:"gender",attrs:{style:{width:"100%"}}},{type:"select",label:"自定义",prop:"status",attrs:{placeholder:"全部",clearable:!0},options:[{label:"启用",value:1},{label:"禁用",value:0}]},{type:"switch",label:"Switch",prop:"status2",attrs:{inlinePrompt:!0,activeValue:1,inactiveValue:0,activeText:"启用",inactiveText:"禁用"}},{type:"input-number",label:"输入框",prop:"sort",attrs:{placeholder:"请输入",controls:!1}},{type:"date-picker",label:"日期格式化",prop:"createTime",attrs:{type:"datetime",format:"YYYY/MM/DD hh:mm:ss","value-format":"x"}}]}),B={grid:"right",colon:!0,showNumber:3,form:{labelPosition:"right",labelWidth:"90px"},cardAttrs:{shadow:"hover",style:{"margin-bottom":"12px"}},formItems:[{tips:{effect:"light",placement:"top",content:"自定义文字提示"},type:"input",label:"输入框",prop:"testInput",attrs:{placeholder:"请输入",clearable:!0},events:{change:e=>{}}},{type:"input-number",label:"数字输入框",prop:"testInputNumber",attrs:{placeholder:"请输入",controls:!1}},{type:"select",label:"下拉选择框",prop:"testSelect",attrs:{placeholder:"全部",clearable:!0},options:Y,events:{change(e){}}},{type:"tree-select",label:"树形选择框",prop:"testTreeSelect",attrs:{placeholder:"请选择",data:R,filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0}},{type:"cascader",label:"级联选择器",prop:"testCascader",attrs:{placeholder:"请选择",clearable:!0,props:{expandTrigger:"hover",label:"label",value:"value",children:"children"},options:[{value:"guide",label:"Guide",children:[{value:"disciplines",label:"Disciplines",children:[{value:"consistency",label:"Consistency"}]},{value:"navigation",label:"Navigation",children:[{value:"side nav",label:"Side Navigation"}]}]}]}},{type:"date-picker",label:"范围选择器",prop:"createAt",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD"}},{type:"date-picker",label:"日期选择器",prop:"testDataPicker",attrs:{placeholder:"请选择",type:"date"}},{type:"time-picker",label:"时间选择器",prop:"testTimePicker",attrs:{placeholder:"请选择",clearable:!0}},{type:"time-select",label:"时间选择",prop:"testTimeSelect",attrs:{placeholder:"请选择",clearable:!0}},{type:"input-tag",label:"标签选择器",prop:"testInputTags",attrs:{placeholder:"请选择",clearable:!0}},{type:"custom-tag",label:"标签选择器",prop:"testCustomTags",attrs:{buttonAttrs:{btnText:"+ New Tag"},inputAttrs:{},tagAttrs:{}}}]},W={class:"app-container h-full flex flex-1 flex-col"},$={class:"flex-x-between mb-10"},J=d({__name:"index",setup(p){const{searchRef:n,contentRef:c,addModalRef:d,editModalRef:Y,handleQueryClick:J,handleResetClick:L,handleAddClick:Q,handleEditClick:G,handleViewClick:H,handleSubmitClick:K,handleExportClick:X,handleSearchClick:ee,handleFilterChange:te}=e();function re(e){"custom1"===e&&S.success("点击了自定义1按钮")}const ae=e=>{"detail"===e.name?(z.drawer={...z.drawer,title:"查看"},H(e.row,async()=>await s.getFormData(e.row.id))):"edit"===e.name?(z.drawer={...z.drawer,title:"修改"},G(e.row,async()=>await s.getFormData(e.row.id))):"reset_pwd"===e.name&&M.prompt("请输入用户「"+e.row.username+"」的新密码","重置密码",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:t})=>{if(!t||t.length<6)return S.warning("密码至少需要6位字符，请重新输入"),!1;s.resetPassword(e.row.id,t).then(()=>{S.success("密码重置成功，新密码是："+t)})}).catch(()=>{})},le=e=>{"view"===e.name?(z.drawer={...z.drawer,title:"查看"},H(e.row)):"edit"===e.name?(z.drawer={...z.drawer,title:"修改"},G(e.row)):"delete"===e.name&&S.success("模拟删除成功")},oe=i(),ie=()=>{Q(oe)},pe=e=>{S.success("二级弹窗提交成功")},se=i(!0);return m(()=>{(async()=>{try{const[e,t]=await Promise.all([T.getOptions(),D.getOptions()]);R.value=e,N.value=t}catch(e){}})()}),(e,i)=>{const p=A,s=P,m=t,T=I,D=V,S=C,M=o,R=r,N=l,G=a;return g(),u("div",W,[b("div",$,[f(p,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/curd/index.vue",type:"primary",target:"_blank"},{default:h(()=>[...i[1]||(i[1]=[y(" 示例源码 请点击>>>> ",-1)])]),_:1}),f(s,{type:"primary",plain:"",round:"",size:"small",onClick:i[0]||(i[0]=e=>se.value=!w(se))},{default:h(()=>[...i[2]||(i[2]=[y("切换示例",-1)])]),_:1})]),w(se)?(g(),u(x,{key:0},[f(m,{ref_key:"searchRef",ref:n,"search-config":w(F),onQueryClick:w(J),onResetClick:w(L)},null,8,["search-config","onQueryClick","onResetClick"]),f(R,{ref_key:"contentRef",ref:c,"content-config":w(q),onAddClick:w(Q),onExportClick:w(X),onSearchClick:w(ee),onToolbarClick:re,onOperateClick:ae,onFilterChange:w(te)},{status:h(e=>[f(T,{type:1==e.row[e.prop]?"success":"info"},{default:h(()=>[y(k(1==e.row[e.prop]?"启用":"禁用"),1)]),_:2},1032,["type"])]),gender:h(e=>[f(D,{modelValue:e.row[e.prop],"onUpdate:modelValue":t=>e.row[e.prop]=t,code:"gender"},null,8,["modelValue","onUpdate:modelValue"])]),mobile:h(e=>[f(S,null,{default:h(()=>[y(k(e.row[e.prop]),1)]),_:2},1024),e.row[e.prop]?(g(),j(M,{key:0,text:e.row[e.prop],style:{"margin-left":"2px"}},null,8,["text"])):v("",!0)]),_:1},8,["content-config","onAddClick","onExportClick","onSearchClick","onFilterChange"]),f(G,{ref_key:"addModalRef",ref:d,"modal-config":w(E),onSubmitClick:w(K)},{gender:h(e=>[f(N,_({modelValue:e.formData[e.prop],"onUpdate:modelValue":t=>e.formData[e.prop]=t,code:"gender"},e.attrs),null,16,["modelValue","onUpdate:modelValue"])]),openModal:h(()=>[f(s,{type:"primary",onClick:ie},{default:h(()=>[...i[3]||(i[3]=[y("打开二级弹窗",-1)])]),_:1})]),_:1},8,["modal-config","onSubmitClick"]),f(G,{ref_key:"addModalRef2",ref:oe,"modal-config":w(O),onCustomSubmit:pe},{gender:h(e=>[f(N,_({modelValue:e.formData[e.prop],"onUpdate:modelValue":t=>e.formData[e.prop]=t,code:"gender"},e.attrs),null,16,["modelValue","onUpdate:modelValue"])]),_:1},8,["modal-config"]),f(G,{ref_key:"editModalRef",ref:Y,"modal-config":w(z),onSubmitClick:w(K)},{gender:h(e=>[f(N,_({modelValue:e.formData[e.prop],"onUpdate:modelValue":t=>e.formData[e.prop]=t,code:"gender"},e.attrs),null,16,["modelValue","onUpdate:modelValue"])]),_:1},8,["modal-config","onSubmitClick"])],64)):(g(),u(x,{key:1},[f(m,{ref_key:"searchRef",ref:n,"search-config":w(B),onResetClick:w(L)},null,8,["search-config","onResetClick"]),f(R,{ref_key:"contentRef",ref:c,"content-config":w(U),onOperateClick:le},{status:h(e=>[f(T,{type:1==e.row[e.prop]?"success":"info"},{default:h(()=>[y(k(1==e.row[e.prop]?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1},8,["content-config"]),f(G,{ref_key:"editModalRef",ref:Y,"modal-config":w(Z)},{suffix:h(()=>[...i[4]||(i[4]=[b("span",{style:{color:"black"}},"%",-1)])]),prefix:h(()=>[...i[5]||(i[5]=[b("span",null,"$",-1)])]),gender:h(e=>[f(N,_({modelValue:e.formData[e.prop],"onUpdate:modelValue":t=>e.formData[e.prop]=t,code:"gender"},e.attrs),null,16,["modelValue","onUpdate:modelValue"])]),_:1},8,["modal-config"])],64))])}}});export{J as default};
